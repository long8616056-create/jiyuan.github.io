<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>蚀界纪元 - 状态栏</title><script type="module">function s(s,a,l){if(!s||'object'!=typeof s)return l;const i=a.replace(/\[(\d+)\]/g,'.$1').split('.');let e=s;for(let s=0;s<i.length;s++){if(null==e)return l;e=e[i[s]]}return void 0!==e?e:l}function a(s,a){const l=function(s){if(null==s)return null;if('string'==typeof s&&s.startsWith('{')&&s.endsWith('}'))try{return JSON.parse(s)}catch{return s}return s}(s);return null!=l?l:a}function l(s,a){const l=document.getElementById(s);l&&(l.textContent=String(a??''))}function i(s,a){const l=document.getElementById(s);l&&(l.innerHTML=a)}function e(s,a,l){const i=document.getElementById(s);if(i){const s=l>0?Math.round(a/l*100):100;i.style.width=`${Math.min(s,100)}%`}}function t(s){return null==s||isNaN(s)?'0':Math.round(s).toLocaleString('zh-CN')}let c={},n=null;function d(a){const l=s(a,'玩家UID','character_001'),i=s(a,'角色系统.角色档案',{});return s(i,l,{})}function v(a,l){if(!l)return'未知';const i=s(a,'角色系统.角色档案',{}),e=s(i,l,{});if(!e||0===Object.keys(e).length)return l;const t=s(e,'基本信息',{});return s(t,'姓名','')||l}function o(l,i,e){const c=document.getElementById(i);if(!c)return;if(!l||0===Object.keys(l).length)return void(c.innerHTML='<div class="memo-empty">未找到角色数据</div>');let n='';const d=s(l,'基本信息',{});n+=`<div class="sec"><div class="sec-title">👤 基础信息</div>\n    <div class="grid g4">\n      <div class="item"><div class="lbl">姓名</div><div class="val">${s(d,'姓名','--')}</div></div>\n      <div class="item"><div class="lbl">性别</div><div class="val">${s(d,'性别','--')}</div></div>\n      <div class="item"><div class="lbl">年龄</div><div class="val">${s(d,'年龄','--')}</div></div>\n      <div class="item"><div class="lbl">身份</div><div class="val">${s(d,'身份','--')}</div></div>\n    </div>\n    <div class="grid g2" style="margin-top:10px">\n      <div class="item"><div class="lbl">居住地</div><div class="val">${s(d,'居住地','--')}</div></div>\n      <div class="item"><div class="lbl">当前位置</div><div class="val">${s(d,'当前位置','--')}</div></div>\n    </div>\n  </div>`;const v=s(l,'性格六维',{}),o=s(l,'性格详情',{});n+=`<details>\n    <summary>🧠 性格详情</summary>\n    <div class="details-content">\n      <div class="grid g6" style="margin-bottom:16px">\n        <div class="item"><div class="lbl">开放性</div><div class="val">${a(s(v,'开放性',0),0)}</div></div>\n        <div class="item"><div class="lbl">尽责性</div><div class="val">${a(s(v,'尽责性',0),0)}</div></div>\n        <div class="item"><div class="lbl">外向性</div><div class="val">${a(s(v,'外向性',0),0)}</div></div>\n        <div class="item"><div class="lbl">亲和性</div><div class="val">${a(s(v,'亲和性',0),0)}</div></div>\n        <div class="item"><div class="lbl">情绪性</div><div class="val">${a(s(v,'情绪性',0),0)}</div></div>\n        <div class="item"><div class="lbl">道德观</div><div class="val">${a(s(v,'道德观',0),0)}</div></div>\n      </div>\n      <div class="personality-detail">\n        ${function(a){let l='';const i=s(a,'核心标签',{});if(Object.keys(i).length>0){l+='<div class="personality-section"><div class="section-title">核心标签</div>';const a=s(i,'正面',[]),e=s(i,'负面',[]);a.length>0&&(l+=`<div class="tag-group"><span class="tag-label">正面:</span> ${a.map(s=>`<span class="tag tag-positive">${s}</span>`).join('')}</div>`),e.length>0&&(l+=`<div class="tag-group"><span class="tag-label">负面:</span> ${e.map(s=>`<span class="tag tag-negative">${s}</span>`).join('')}</div>`),l+='</div>'}const e=s(a,'行为习惯',[]);e.length>0&&(l+=`<div class="personality-section"><div class="section-title">行为习惯</div><div class="habit-list">${e.map(s=>`<span class="habit-item">${s}</span>`).join('')}</div></div>`);l+=`<div class="personality-section"><div class="section-title">说话风格</div><div class="val">${s(a,'说话风格','')}</div></div>`,l+=`<div class="personality-section"><div class="section-title">当前心境</div><div class="val">${s(a,'当前心境','')}</div></div>`;const t=s(a,'价值观',[]);t.length>0&&(l+=`<div class="personality-section"><div class="section-title">价值观</div><div class="val">${t.join('、')}</div></div>`);return l}(o)}\n      </div>\n    </div>\n  </details>`;n+=`<details>\n    <summary>📐 外貌详情</summary>\n    <div class="details-content">\n      <div class="appearance-detail">\n        ${function(a){let l='';l+=`<div class="appearance-item"><span class="lbl">整体印象:</span> <span class="val">${s(a,'整体印象','待生成')}</span></div>`,l+=`<div class="appearance-item"><span class="lbl">身高:</span> <span class="val">${s(a,'身高','待生成')}</span></div>`,l+=`<div class="appearance-item"><span class="lbl">体型:</span> <span class="val">${s(a,'体型','待生成')}</span></div>`,l+=`<div class="appearance-item"><span class="lbl">三围:</span> <span class="val">${s(a,'三围','待生成')}</span></div>`,l+=`<div class="appearance-item"><span class="lbl">发型发色:</span> <span class="val">${s(a,'发型发色','待生成')}</span></div>`,l+=`<div class="appearance-item"><span class="lbl">瞳色:</span> <span class="val">${s(a,'瞳色','待生成')}</span></div>`;const i=s(a,'面容','');i&&(l+=`<div class="appearance-item"><span class="lbl">面容:</span> <span class="val">${i}</span></div>`);const e=s(a,'身体详情',{});Object.keys(e).length>0&&(l+='<div class="appearance-section"><div class="section-title">身体详情</div>',Object.keys(e).forEach(a=>{l+=`<div class="appearance-item"><span class="lbl">${a}:</span> <span class="val">${s(e,a,'')}</span></div>`}),l+='</div>');const t=s(a,'当前着装',{});if(Object.keys(t).length>0){l+='<div class="appearance-section"><div class="section-title">当前着装</div>';['面部','头部','上装','下装','内衣','袜子','鞋子','外套','饰品'].forEach(a=>{const i=s(t,a,'');i&&'无'!==i&&(l+=`<div class="appearance-item"><span class="lbl">${a}:</span> <span class="val">${i}</span></div>`)});const a=s(t,'整体描述','');a&&(l+=`<div class="appearance-item" style="margin-top:8px;padding-top:8px;border-top:1px dashed var(--border)"><span class="lbl">整体描述:</span> <span class="val">${a}</span></div>`),l+='</div>'}const c=s(a,'着装风格',''),n=s(a,'暴露程度',''),d=s(a,'破损情况','');(c||n||d)&&(l+='<div class="appearance-section"><div class="section-title">着装状态</div>',c&&(l+=`<div class="appearance-item"><span class="lbl">着装风格:</span> <span class="val">${c}</span></div>`),n&&(l+=`<div class="appearance-item"><span class="lbl">暴露程度:</span> <span class="val">${n}</span></div>`),d&&(l+=`<div class="appearance-item"><span class="lbl">破损情况:</span> <span class="val">${d}</span></div>`),l+='</div>');const v=s(a,'特殊标记','');v&&(l+='<div class="appearance-section"><div class="section-title">特殊标记</div>',l+=`<div class="appearance-item"><span class="val">${v}</span></div>`,l+='</div>');return l}(s(l,'外貌',{}))}\n      </div>\n    </div>\n  </details>`;const p=s(l,'色色档案',{});Object.keys(p).length>0&&(n+=`<details>\n      <summary>🔞 色色档案</summary>\n      <div class="details-content">\n        ${function(l){let i='';i+='<div class="erotic-stats-grid">',['淫欲','羞耻','敏感','大胆','放纵','堕落'].forEach(e=>{i+=`<div class="erotic-stat"><span class="lbl">${e}</span><span class="val">${a(s(l,e,0),0)}</span></div>`}),i+='</div>';const e=s(l,'身体开发度',{});Object.keys(e).length>0&&(i+='<div class="erotic-section-title">身体开发度</div><div class="body-dev-grid">',Object.keys(e).forEach(s=>{i+=`<div class="dev-item"><span class="lbl">${s}</span><span class="val">${a(e[s],0)}%</span></div>`}),i+='</div>');const c=s(l,'经历记录',{});Object.keys(c).length>0&&(i+='<div class="erotic-section-title">经历记录</div><div class="exp-grid">',Object.keys(c).forEach(s=>{let a=c[s];'number'==typeof a&&(a=t(a)),i+=`<div class="exp-item"><div class="lbl">${s}</div><div class="val">${a}</div></div>`}),i+='</div>');return i}(p)}\n      </div>\n    </details>`);s(l,'管理系统',{});const m=s(l,'教育系统',{}),u=s(l,'法律系统',{}),h=s(l,'个人记录',{});n+=`<details>\n    <summary>📚 其他档案</summary>\n    <div class="details-content">\n      <div class="sec"><div class="sec-title">🎓 教育</div>\n        <div class="grid g2">\n          <div class="item"><div class="lbl">学历</div><div class="val">${s(m,'学历','--')}</div></div>\n          <div class="item"><div class="lbl">学校</div><div class="val">${s(m,'学校','--')}</div></div>\n          <div class="item"><div class="lbl">专业</div><div class="val">${s(m,'专业','--')}</div></div>\n        </div>\n      </div>\n      <div class="sec"><div class="sec-title">⚖️ 法律风险</div>\n        <div class="item"><div class="lbl">是否有违法边缘行为</div><div class="val">${s(u,'法律风险.是否有违法边缘行为',!1)?'是':'否'}</div></div>\n      </div>\n      <div class="sec"><div class="sec-title">📝 个人记录</div>\n        <div class="memo-container">\n          <div class="memo-section"><div class="memo-title">重要记忆</div>\n            <div class="memo-items">${r(s(h,'重要记忆',[]))}</div>\n          </div>\n          <div class="memo-section"><div class="memo-title">已知情报</div>\n            <div class="memo-items">${r(s(h,'已知情报',[]))}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </details>`,c.innerHTML=n}function r(s){return s&&0!==s.length?s.map(s=>`<div class="memo-item">${s}</div>`).join(''):'<div class="memo-empty">无</div>'}function p(l){const e=s(d(l),'能力系统',{}),c=s(e,'物品栏',{});let n='';const v=Object.keys(c);v.length>0?v.forEach(l=>{const i=c[l],e=s(i,'物品名称',s(i,'名称','未知物品')),d=s(i,'物品类型',s(i,'类型','其他')),v=s(i,'物品描述',s(i,'描述','')),o=a(s(i,'数量',1),1),r=s(i,'品质','普通'),p=s(i,'状态',''),m=a(s(i,'购买价格',0),0),u=s(i,'购买时间',''),h=s(i,'预计到货',''),b=s(i,'备注','');n+='<div class="item-card">',n+='<div class="item-header" style="cursor:pointer;display:flex;justify-content:space-between;align-items:center;">',n+='<div style="flex:1">',n+=`<div class="item-name">${e}${o>1?` x${o}`:''}</div>`,n+='<div style="margin-top:4px;display:flex;gap:12px;font-size:13px;color:var(--dim)">',n+=`<span>类型: ${d}</span>`,n+=`<span>品质: ${r}</span>`,p&&(n+=`<span style="color:var(--yellow)">状态: ${p}</span>`),n+='</div>',n+='</div>',n+=`<button class="item-toggle" data-item-id="${l}" style="background:none;border:none;color:var(--primary);font-size:16px;cursor:pointer;padding:4px 8px;transition:transform 0.2s;flex-shrink:0;">▼</button>`,n+='</div>',n+=`<div class="item-info collapsed" data-item-content="${l}">`,n+='<div class="item-section">',n+='<div class="item-section-title">📋 基础信息</div>',n+='<div class="grid g2">',n+=`<div class="item"><div class="lbl">物品名称</div><div class="val">${e}</div></div>`,n+=`<div class="item"><div class="lbl">物品类型</div><div class="val">${d}</div></div>`,n+=`<div class="item"><div class="lbl">品质</div><div class="val">${r}</div></div>`,n+=`<div class="item"><div class="lbl">数量</div><div class="val">${o}</div></div>`;if(s(i,'可堆叠',!0)){const l=a(s(i,'最大堆叠',99),99);n+=`<div class="item"><div class="lbl">可堆叠</div><div class="val">是（最大${l}）</div></div>`}else n+='<div class="item"><div class="lbl">可堆叠</div><div class="val">否</div></div>';const g=s(i,'效果','');g&&'无'!==g&&(n+=`<div class="item"><div class="lbl">效果</div><div class="val">${g}</div></div>`),n+='</div>',n+='</div>',v&&(n+='<div class="item-section">',n+='<div class="item-section-title">📝 物品描述</div>',n+=`<div style="color:var(--dim);font-size:13px;line-height:1.5">${v}</div>`,n+='</div>'),(m>0||u)&&(n+='<div class="item-section">',n+='<div class="item-section-title">💰 购买信息</div>',n+='<div class="grid g2">',m>0&&(n+=`<div class="item"><div class="lbl">购买价格</div><div class="val" style="color:var(--yellow)">${t(m)}元</div></div>`),u&&(n+=`<div class="item"><div class="lbl">购买时间</div><div class="val">${u}</div></div>`),n+='</div>',n+='</div>'),p&&(n+='<div class="item-section">',n+='<div class="item-section-title">📦 状态信息</div>',n+='<div class="grid g2">',n+=`<div class="item"><div class="lbl">状态</div><div class="val" style="color:var(--yellow)">${p}</div></div>`,h&&(n+=`<div class="item"><div class="lbl">预计到货</div><div class="val">${h}</div></div>`),n+='</div>',n+='</div>'),b&&(n+='<div class="item-section">',n+='<div class="item-section-title">📝 备注</div>',n+=`<div style="color:var(--dim);font-size:13px;line-height:1.5">${b}</div>`,n+='</div>'),n+='</div></div>'}):n='<div class="item-empty">物品栏为空</div>',i('items-list',n),function(){document.querySelectorAll('.item-toggle').forEach(s=>{s.addEventListener('click',a=>{a.stopPropagation();const l=s.getAttribute('data-item-id');if(!l)return;const i=document.querySelector(`[data-item-content="${l}"]`),e=s.closest('.item-header');if(i&&e){i.classList.contains('collapsed')?(i.classList.remove('collapsed'),i.classList.add('expanded'),s.textContent='▲'):(i.classList.remove('expanded'),i.classList.add('collapsed'),s.textContent='▼')}})});document.querySelectorAll('.item-header').forEach(s=>{s.addEventListener('click',a=>{if(a.target.classList.contains('item-toggle'))return;const l=s.querySelector('.item-toggle');l&&l.click()})})}()}function m(l){const e=s(d(l),'生活系统',{}),c=s(e,'平台账号',{});let n='';const v=Object.keys(c);v.length>0?v.forEach(l=>{const i=c[l],e=s(i,'平台名称','未知平台'),d=s(i,'账号名称','未知账号'),v=s(i,'账号ID',''),o=s(i,'账号状态','正常'),r=s(i,'是否认证',!1),p=s(i,'认证类型',''),m=s(i,'账号等级','新用户'),u=s(i,'会员状态','无'),h=a(s(i,'粉丝数量',0),0),b=a(s(i,'关注数量',0),0),g=a(s(i,'获赞总数',0),0),y=a(s(i,'评论总数',0),0),f=a(s(i,'分享总数',0),0),k=a(s(i,'发布内容数',0),0),E=a(s(i,'本月收入',0),0),j=a(s(i,'累计收入',0),0),x=s(i,'成人内容.是否成人平台',!1),w=a(s(i,'成人内容.订阅价格',0),0),O=a(s(i,'成人内容.订阅人数',0),0),L=s(i,'内容标签',[]),S=s(i,'成人内容.内容标签',[]),I=s(i,'备注','');n+='<div class="platform-card">',n+='<div class="platform-header" style="cursor:pointer;display:flex;justify-content:space-between;align-items:center;">',n+='<div style="flex:1">',n+=`<div class="platform-name">${e} - ${d}</div>`,v&&(n+=`<div class="platform-id" style="color:var(--dim);font-size:13px;">${v}</div>`);const A=s(i,'账号简介','');A&&(n+=`<div class="platform-intro" style="color:var(--dim);font-size:13px;margin-top:6px;line-height:1.5">${A}</div>`),n+='<div style="margin-top:8px;display:flex;gap:16px;font-size:13px;color:var(--dim)">',n+=`<span>👥 ${t(h)}</span>`,n+=`<span>📝 ${t(k)}</span>`,E>0&&(n+=`<span style="color:var(--yellow)">💰 ${t(E)}元</span>`),n+='</div>',n+='</div>',n+=`<button class="platform-toggle" data-platform-id="${l}" style="background:none;border:none;color:var(--primary);font-size:18px;cursor:pointer;padding:4px 8px;transition:transform 0.2s;">▼</button>`,n+='</div>',n+=`<div class="platform-info collapsed" data-platform-content="${l}">`,n+='<div class="platform-section">',n+='<div class="platform-section-title">📋 基础信息</div>',n+='<div class="grid g2">',n+=`<div class="item"><div class="lbl">平台类型</div><div class="val">${s(i,'平台类型','未知')}</div></div>`,n+=`<div class="item"><div class="lbl">账号状态</div><div class="val">${o}</div></div>`,n+=`<div class="item"><div class="lbl">是否认证</div><div class="val">${r?p||'已认证':'未认证'}</div></div>`,n+=`<div class="item"><div class="lbl">账号等级</div><div class="val">${m}</div></div>`,n+=`<div class="item"><div class="lbl">会员状态</div><div class="val">${u}</div></div>`,n+=`<div class="item"><div class="lbl">发布频率</div><div class="val">${s(i,'发布频率','未知')}</div></div>`;const q=s(i,'创建时间','');q&&(n+=`<div class="item"><div class="lbl">创建时间</div><div class="val">${q}</div></div>`);const P=s(i,'最后更新时间','');P&&(n+=`<div class="item"><div class="lbl">最后更新</div><div class="val">${P}</div></div>`);const M=a(s(i,'活跃度',0),0);if(M>0&&(n+=`<div class="item"><div class="lbl">活跃度</div><div class="val">${M}</div></div>`),n+='</div>',n+='</div>',n+='<div class="platform-section">',n+='<div class="platform-section-title">📊 数据统计</div>',n+='<div class="grid g3">',n+=`<div class="item"><div class="lbl">粉丝数</div><div class="val" style="color:var(--primary)">${t(h)}</div></div>`,n+=`<div class="item"><div class="lbl">关注数</div><div class="val">${t(b)}</div></div>`,n+=`<div class="item"><div class="lbl">发布数</div><div class="val">${t(k)}</div></div>`,n+=`<div class="item"><div class="lbl">获赞总数</div><div class="val" style="color:var(--yellow)">${t(g)}</div></div>`,n+=`<div class="item"><div class="lbl">评论总数</div><div class="val">${t(y)}</div></div>`,n+=`<div class="item"><div class="lbl">分享总数</div><div class="val">${t(f)}</div></div>`,n+='</div>',n+='</div>',E>0||j>0){n+='<div class="platform-section">',n+='<div class="platform-section-title">💰 收入统计</div>',n+='<div class="grid g2">',n+=`<div class="item"><div class="lbl">本月收入</div><div class="val" style="color:var(--yellow)">${t(E)}元</div></div>`,n+=`<div class="item"><div class="lbl">累计收入</div><div class="val" style="color:var(--green)">${t(j)}元</div></div>`;const l=s(i,'收入来源',{});if(l&&Object.keys(l).length>0){n+='<div class="item" style="grid-column:1/-1"><div class="lbl">收入来源</div><div class="val">';const i=[];a(s(l,'广告收入',0),0)>0&&i.push(`广告: ${t(a(s(l,'广告收入',0),0))}元`),a(s(l,'打赏收入',0),0)>0&&i.push(`打赏: ${t(a(s(l,'打赏收入',0),0))}元`),a(s(l,'带货收入',0),0)>0&&i.push(`带货: ${t(a(s(l,'带货收入',0),0))}元`),a(s(l,'会员订阅',0),0)>0&&i.push(`订阅: ${t(a(s(l,'会员订阅',0),0))}元`),a(s(l,'其他',0),0)>0&&i.push(`其他: ${t(a(s(l,'其他',0),0))}元`),n+=i.length>0?i.join(' | '):'暂无',n+='</div></div>'}n+='</div>',n+='</div>'}const B=s(i,'内容类型',[]);B&&B.length>0&&(n+='<div class="platform-section">',n+='<div class="platform-section-title">📝 内容类型</div>',n+='<div class="tag-list">',B.forEach(s=>{n+=`<span class="tag">${s}</span>`}),n+='</div>',n+='</div>'),L&&L.length>0&&(n+='<div class="platform-section">',n+='<div class="platform-section-title">🏷️ 内容标签</div>',n+='<div class="tag-list">',L.forEach(s=>{n+=`<span class="tag">${s}</span>`}),n+='</div>',n+='</div>');const C=s(i,'爆款内容列表',[]);C&&C.length>0&&(n+='<div class="platform-section">',n+='<div class="platform-section-title">🔥 爆款内容</div>',n+='<div style="font-size:13px;color:var(--dim)">',C.forEach((s,a)=>{n+=`<div style="margin-bottom:4px">${a+1}. ${'string'==typeof s?s:JSON.stringify(s)}</div>`}),n+='</div>',n+='</div>');const D=s(i,'重要事件',[]);if(D&&D.length>0&&(n+='<div class="platform-section">',n+='<div class="platform-section-title">⭐ 重要事件</div>',n+='<div style="font-size:13px;color:var(--dim)">',D.forEach((s,a)=>{n+=`<div style="margin-bottom:4px">${a+1}. ${'string'==typeof s?s:JSON.stringify(s)}</div>`}),n+='</div>',n+='</div>'),x){n+='<div class="platform-section" style="border-left:3px solid var(--red)">',n+='<div class="platform-section-title">🔞 成人内容</div>',n+='<div class="grid g2">',n+=`<div class="item"><div class="lbl">内容尺度</div><div class="val">${s(i,'成人内容.内容尺度','待定')}</div></div>`,w>0&&(n+=`<div class="item"><div class="lbl">订阅价格</div><div class="val" style="color:var(--yellow)">$${w}/月</div></div>`),O>0&&(n+=`<div class="item"><div class="lbl">订阅人数</div><div class="val" style="color:var(--primary)">${t(O)}</div></div>`);const l=a(s(i,'成人内容.PPV内容数',0),0);l>0&&(n+=`<div class="item"><div class="lbl">PPV内容数</div><div class="val">${t(l)}</div></div>`);const e=a(s(i,'成人内容.PPV平均价格',0),0);e>0&&(n+=`<div class="item"><div class="lbl">PPV平均价格</div><div class="val">$${e}</div></div>`);if(s(i,'成人内容.私信定制服务',!1)){const l=a(s(i,'成人内容.私信定制价格',0),0);n+=`<div class="item"><div class="lbl">定制服务</div><div class="val">${l>0?`$${l}`:'开启'}</div></div>`}s(i,'成人内容.是否接受线下',!1)&&(n+='<div class="item"><div class="lbl">线下服务</div><div class="val" style="color:var(--red)">接受</div></div>'),n+='</div>',S&&S.length>0&&(n+='<div class="tag-list" style="margin-top:8px">',S.forEach(s=>{n+=`<span class="tag" style="background:var(--red);color:#fff">${s}</span>`}),n+='</div>'),n+='</div>'}I&&(n+='<div class="platform-section">',n+='<div class="platform-section-title">📝 备注</div>',n+=`<div style="color:var(--dim);font-size:13px;line-height:1.5">${I}</div>`,n+='</div>'),n+='</div></div>'}):n='<div class="platform-empty">暂无平台账号</div>',i('platform-list',n),function(){document.querySelectorAll('.platform-toggle').forEach(s=>{s.addEventListener('click',a=>{a.stopPropagation();const l=s.getAttribute('data-platform-id');if(!l)return;const i=document.querySelector(`[data-platform-content="${l}"]`),e=s.closest('.platform-header');if(i&&e){i.classList.contains('collapsed')?(i.classList.remove('collapsed'),i.classList.add('expanded'),s.textContent='▲'):(i.classList.remove('expanded'),i.classList.add('collapsed'),s.textContent='▼')}})});document.querySelectorAll('.platform-header').forEach(s=>{s.addEventListener('click',a=>{if(a.target.classList.contains('platform-toggle'))return;const l=s.querySelector('.platform-toggle');l&&l.click()})})}()}function u(a){const l=s(a,'备忘录',{}),e=s(l,'重要事项',[]),t=s(l,'待处理事件',[]),c=s(a,'管理系统.日程表',s(d(a),'管理系统.日程表',{}));let n='';e.length>0?(n+='<div class="memo-items">',e.forEach(s=>{n+=`<div class="memo-item">${String(s)}</div>`}),n+='</div>'):n='<div class="memo-empty">暂无重要事项</div>',i('memo-important-full',n),n='',t.length>0?(n+='<div class="memo-items">',t.forEach(s=>{n+=`<div class="memo-item">${String(s)}</div>`}),n+='</div>'):n='<div class="memo-empty">暂无待处理事件</div>',i('memo-pending-full',n);const v=Object.keys(c);let o='';if(v.length>0){const a={};v.forEach(l=>{const i=c[l],e=s(i,'日期','未设定日期');a[e]||(a[e]=[]),a[e].push({key:l,item:i})});Object.keys(a).sort().forEach(l=>{o+='<div class="schedule-group">',o+=`<div class="schedule-date">${l}</div>`,o+='<div class="schedule-list">',a[l].forEach(({key:a,item:i})=>{const e=s(i,'事项',s(i,'事件名称','未命名事项')),t=s(i,'时间',''),c=s(i,'地点',''),n=s(i,'状态','待进行'),d=s(i,'优先级','普通'),v=s(i,'备注',s(i,'描述',s(i,'事件描述','')));o+='<div class="schedule-card">',o+='<div class="schedule-header">',o+='<div class="schedule-main">',o+=`<div class="schedule-title">${e}</div>`,o+='<div class="schedule-meta">',t&&(o+=`<span class="schedule-time">${t}</span>`),c&&(o+=`<span class="schedule-place">${c}</span>`),o+='</div>',o+='</div>',o+='<div class="schedule-tags">',o+=`<span class="schedule-tag status-${n}">${n}</span>`,o+=`<span class="schedule-tag priority-${d}">${d}</span>`,o+='</div>',o+=`<button class="schedule-toggle" data-schedule-id="${a}">▼</button>`,o+='</div>',o+=`<div class="schedule-info collapsed" data-schedule-content="${a}">`,o+='<div class="schedule-section">',o+='<div class="schedule-section-title">📋 基本信息</div>',o+='<div class="grid g2">',o+=`<div class="item"><div class="lbl">日期</div><div class="val">${l}</div></div>`,t&&(o+=`<div class="item"><div class="lbl">时间</div><div class="val">${t}</div></div>`),c&&(o+=`<div class="item"><div class="lbl">地点</div><div class="val">${c}</div></div>`),o+=`<div class="item"><div class="lbl">状态</div><div class="val">${n}</div></div>`,o+=`<div class="item"><div class="lbl">优先级</div><div class="val">${d}</div></div>`,o+='</div>',o+='</div>',v&&(o+='<div class="schedule-section">',o+='<div class="schedule-section-title">📝 备注</div>',o+=`<div class="schedule-note">${v}</div>`,o+='</div>'),o+='</div>',o+='</div>'}),o+='</div>',o+='</div>'})}else o='<div class="memo-empty">暂无日程安排</div>';i('memo-schedule-full',o),function(){document.querySelectorAll('.schedule-toggle').forEach(s=>{s.addEventListener('click',a=>{a.stopPropagation();const l=s.getAttribute('data-schedule-id');if(!l)return;const i=document.querySelector(`[data-schedule-content="${l}"]`);if(!i)return;i.classList.contains('collapsed')?(i.classList.remove('collapsed'),i.classList.add('expanded'),s.textContent='▲'):(i.classList.remove('expanded'),i.classList.add('collapsed'),s.textContent='▼')})});document.querySelectorAll('.schedule-header').forEach(s=>{s.addEventListener('click',a=>{if(a.target.classList.contains('schedule-toggle'))return;const l=s.querySelector('.schedule-toggle');l&&l.click()})})}()}function h(){const r=function(){try{const s=getLastMessageId();if(!s&&0!==s)return console.warn('无法获取最后一条消息ID'),{};let a=null;try{const l=getChatMessages(`0-${s}`);if(l&&Array.isArray(l))for(let s=l.length-1;s>=0;s--)if(l[s]&&'assistant'===l[s].role){a=l[s].message_id;break}}catch(l){for(let l=s;l>=0;l--)try{const s=getChatMessages(l,{role:'assistant'});if(s&&s.length>0){a=l;break}}catch(s){}}null===a&&(a=s);let l={};if('undefined'!=typeof window&&window.Mvu)try{const s=window.Mvu.getMvuData({type:'message',message_id:a});l=s?.stat_data||s||{}}catch(s){l=getVariables({type:'message',message_id:a})}else l=getVariables({type:'message',message_id:a});return l&&l.stat_data?l.stat_data:l&&'object'==typeof l?l:l||{}}catch(s){return console.error('读取变量失败:',s),{}}}();r&&0!==Object.keys(r).length?(c=r,function(i){const c=s(i,'世界',{}),n=d(i),v=function(s){if(!s)return{date:'----',time:'--:--'};try{const a=s.match(/纪元(\d+)年(\d+)月(\d+)日\s+(\d{2}):(\d{2})/);if(a)return{date:`纪元${a[1]}年${a[2]}月${a[3]}日`,time:`${a[4]}:${a[5]}`};const l=s.match(/(\d{4})-(\d{2})-(\d{2})\s+(\d{2}):(\d{2})/);return l?{date:`${l[1]}-${l[2]}-${l[3]}`,time:`${l[4]}:${l[5]}`}:{date:s,time:''}}catch{return{date:s,time:''}}}(s(c,'当前时间',''));l('h-date',v.date),l('h-time',v.time),l('ov-time',`${v.date} ${v.time}`),l('h-loc',s(c,'当前地点','未知')),l('ov-loc',s(c,'当前地点','未知')),l('ov-region',s(c,'当前区域','内环')),l('h-region',s(c,'当前区域','内环')),l('ov-era',s(c,'时代背景','未知'));const o=s(n,'基本信息',{});l('ov-name',s(o,'姓名','未知'));const r=s(n,'状态系统.状态概要',{});l('ov-health',s(r,'健康','健康')),l('ov-mental',s(r,'精神','正常')),l('ov-emotion',s(r,'情绪','平静')),l('ov-overall',s(r,'总体','正常'));const p=s(n,'财务系统.财务状况',{}),m=a(s(p,'现金',0),0),u=a(s(p,'银行账户',0),0),h=a(s(p,'月收入',0),0),b=a(s(p,'月支出',0),0);l('h-cash',t(m)),l('h-bank',t(u)),l('h-income',t(h)),l('h-expense',t(b)),l('ov-cash',t(m)),l('ov-bank',t(u)),l('ov-income',t(h)),l('ov-expense',t(b));const g=s(n,'职业系统.主职业',{});l('ov-career',s(g,'职业名称','无')||'无'),l('ov-company',s(g,'工作单位','无')||'无');const y=s(n,'生活系统.住所',{}),f=Object.keys(y);if(f.length>0){const a=y[f[0]];l('ov-residence',s(a,'名称','未知')),l('ov-residence-type',s(a,'类型','未知'))}else l('ov-residence','无'),l('ov-residence-type','无');const k=s(n,'觉醒者档案',{});l('ov-awakened',a(s(k,'是否觉醒',!1),!1)?'已觉醒':'未觉醒'),l('ov-sequence',s(k,'序列','--')),l('ov-realm',s(k,'境界','--')),l('ov-level',s(k,'等级','--'));const E=a(s(k,'三极窍.精窍',0),0),j=a(s(k,'三极窍.气窍',0),0),x=a(s(k,'三极窍.神窍',0),0);e('ov-jing-bar',E,100),l('ov-jing',E),e('ov-qi-bar',j,100),l('ov-qi',j),e('ov-shen-bar',x,100),l('ov-shen',x);const w=s(n,'源能资源',{}),O=s(w,'魔晶',{});l('ov-crystal-low',t(a(s(O,'低纯度',0),0))),l('ov-crystal-mid',t(a(s(O,'中纯度',0),0))),l('ov-crystal-high',t(a(s(O,'高纯度',0),0))),l('ov-soul-bead',t(a(s(w,'魂珠',0),0)));const L=a(s(k,'源能总量',0),0);l('h-source-energy',t(a(s(k,'源能当前值',0),0))),l('h-source-energy-max',t(L));const S=s(c,'威胁状态',{}),I=a(s(S,'空间震荡指数',0),0),A=a(s(S,'鬼气浓度',0),0),q=s(S,'当前预警级别','无');e('ov-space-shock-bar',I,100),l('ov-space-shock',I),e('ov-ghost-bar',A,100),l('ov-ghost',A),l('ov-alert-level',q);const P=s(c,'活跃威胁',{}),M=s(P,'活跃红门',[]),B=s(P,'活跃鬼域',[]);l('ov-active-threats',M.length+B.length)}(r),function(s){o(d(s),'p-player')}(r),function(a){const l=s(a,'角色系统.角色档案',{}),i=Object.keys(l).filter(a=>!s(l[a],'是否为玩家',!1)),e=document.getElementById('character-selector');if(!e)return;!n&&i.length>0&&(n=i[0]);let t='';0===i.length?t='<div class="memo-empty">暂无其他角色</div>':i.forEach(a=>{const i=s(l[a],'基本信息.姓名',a);t+=`<button class="char-btn ${n===a?'active':''}" data-uid="${a}">${i}</button>`}),e.innerHTML=t,e.querySelectorAll('.char-btn').forEach(s=>{s.addEventListener('click',s=>{const a=s.target,i=a.getAttribute('data-uid');i&&(n=i,e.querySelectorAll('.char-btn').forEach(s=>s.classList.remove('active')),a.classList.add('active'),o(l[i],'character-detail-container'))})}),n&&l[n]?o(l[n],'character-detail-container'):document.getElementById('character-detail-container').innerHTML=''}(r),function(c){const n=s(d(c),'觉醒者档案',{});l('awakened-status',a(s(n,'是否觉醒',!1),!1)?'已觉醒':'未觉醒'),l('awakened-method',s(n,'觉醒方式','未觉醒')),l('awakened-time',s(n,'觉醒时间','--')),l('awakened-sequence',s(n,'序列','未定')),l('awakened-style',s(n,'流派','--')),l('awakened-realm',s(n,'境界','未觉醒')),l('awakened-level',s(n,'等级','--')),l('awakened-tendency',s(n,'序列倾向','--'));const v=a(s(n,'三极窍.精窍',0),0),o=a(s(n,'三极窍.气窍',0),0),r=a(s(n,'三极窍.神窍',0),0);e('awakened-jing-bar',v,100),l('awakened-jing',v),e('awakened-qi-bar',o,100),l('awakened-qi',o),e('awakened-shen-bar',r,100),l('awakened-shen',r);const p=a(s(n,'源能总量',0),0),m=a(s(n,'源能当前值',0),0),u=a(s(n,'源能亲和力',0),0),h=a(s(n,'当前境界进度',0),0);l('awakened-source-total',t(p)),e('awakened-source-bar',m,p||1),l('awakened-source-current',t(m)),l('awakened-source-max',t(p)),l('awakened-affinity',u),e('awakened-progress-bar',h,100),l('awakened-progress',h);const b=s(n,'专属风险',{}),g=a(s(b,'走火',0),0),y=a(s(b,'识海崩溃',0),0),f=a(s(b,'排异',0),0),k=a(s(b,'反噬',0),0);e('awakened-risk-qi-bar',g,100),l('awakened-risk-qi',g),e('awakened-risk-mind-bar',y,100),l('awakened-risk-mind',y),e('awakened-risk-tech-bar',f,100),l('awakened-risk-tech',f),e('awakened-risk-contract-bar',k,100),l('awakened-risk-contract',k);const E=s(n,'序列档案',{});let j='';const x=Object.keys(E);x.length>0?x.forEach(s=>{const a=E[s];Object.keys(a).length>0&&(j+=`<div class="item"><div class="lbl">${s}</div><div class="val">已激活</div></div>`)}):j='<div class="memo-empty">暂无序列档案</div>',i('awakened-sequence-archives',j),l('awakened-ipa-level',s(n,'IPA认证等级','--')),l('awakened-ipa-time',s(n,'IPA认证时间','--'))}(r),function(e){const c=d(e),n=s(c,'源能资源',{}),v=s(n,'魔晶',{}),o=a(s(v,'低纯度',0),0),r=a(s(v,'中纯度',0),0),p=a(s(v,'高纯度',0),0);l('source-crystal-low',t(o)),l('source-crystal-mid',t(r)),l('source-crystal-high',t(p)),l('source-soul-bead',t(a(s(n,'魂珠',0),0)));const m=s(n,'兽核',{});let u='';const h=Object.keys(m);h.length>0?(u='<div class="grid g4">',h.forEach(s=>{const l=a(m[s],0);l>0&&(u+=`<div class="item"><div class="lbl">${s}级</div><div class="val" style="color:var(--orange)">${t(l)}</div></div>`)}),u+='</div>'):u='<div class="memo-empty">暂无兽核</div>',i('source-beast-core',u);const b=s(n,'天材地宝',[]);let g='';b.length>0?(g='<div class="memo-items">',b.forEach(s=>{g+=`<div class="memo-item">${String(s)}</div>`}),g+='</div>'):g='<div class="memo-empty">暂无天材地宝</div>',i('source-treasures',g);const y=s(c,'财务系统.财务状况',{});l('source-value',t(a(s(y,'源能资源估值',0),0)))}(r),function(t){const c=s(t,'世界',{}),n=s(c,'威胁状态',{}),d=a(s(n,'空间震荡指数',0),0),v=a(s(n,'鬼气浓度',0),0),o=s(n,'当前预警级别','无'),r=s(n,'预警类型','--'),p=s(n,'预警区域','--');e('threat-space-shock-bar',d,100),l('threat-space-shock',d),e('threat-ghost-bar',v,100),l('threat-ghost',v),l('threat-alert-level',o),l('threat-alert-type',r),l('threat-alert-region',p);const m=s(c,'活跃威胁',{}),u=s(m,'活跃红门',[]),h=s(m,'活跃鬼域',[]);l('threat-active-count',u.length+h.length);let b='';u.length>0?(b='<div class="memo-items">',u.forEach(s=>{b+=`<div class="memo-item" style="color:var(--red)">${String(s)}</div>`}),b+='</div>'):b='<div class="memo-empty">暂无活跃红门</div>',i('threat-red-gates',b);let g='';h.length>0?(g='<div class="memo-items">',h.forEach(s=>{g+=`<div class="memo-item" style="color:var(--dim)">${String(s)}</div>`}),g+='</div>'):g='<div class="memo-empty">暂无活跃鬼域</div>',i('threat-grey-domains',g)}(r),function(e){const t=s(d(e),'拓荒者档案',{});l('pioneer-ipa-level',s(t,'IPA认证等级','--')),l('pioneer-ipa-time',s(t,'IPA认证时间','--')),l('pioneer-ipa-status',s(t,'IPA认证等级','')?'已认证':'未认证');const c=s(t,'任务记录',{});let n='';const v=Object.keys(c);v.length>0?(n='<div class="memo-items">',v.forEach(a=>{const l=c[a];n+=`<div class="memo-item">${s(l,'任务名称',a)} - ${s(l,'状态','进行中')}</div>`}),n+='</div>'):n='<div class="memo-empty">暂无任务记录</div>',i('pioneer-missions',n);const o=s(t,'声望系统',{});let r='';Object.keys(o).length>0?(r='<div class="grid g2">',Object.keys(o).forEach(s=>{const l=a(o[s],0);r+=`<div class="item"><div class="lbl">${s}</div><div class="val">${l}</div></div>`}),r+='</div>'):r='<div class="memo-empty">暂无声望记录</div>',i('pioneer-reputation',r);const p=s(t,'探索记录',[]);let m='';p.length>0?(m='<div class="memo-items">',p.forEach(s=>{m+=`<div class="memo-item">${String(s)}</div>`}),m+='</div>'):m='<div class="memo-empty">暂无探索记录</div>',i('pioneer-exploration',m)}(r),function(a){const l=d(a),e=s(a,'公会系统.公会档案',{}),t=s(l,'公会系统.所属公会UID','');let c='';if(t){const a=s(e,t,{});Object.keys(a).length>0&&(c=`<div class="item"><div class="lbl">公会名称</div><div class="val">${s(a,'公会名称','--')}</div></div>`,c+=`<div class="item"><div class="lbl">公会类型</div><div class="val">${s(a,'公会类型','--')}</div></div>`,c+=`<div class="item"><div class="lbl">职位</div><div class="val">${s(a,'职位','--')}</div></div>`)}else c='<div class="memo-empty">未加入任何公会</div>';i('guild-member',c);const n=s(a,'公会系统.已知公会',[]);let v='';n.length>0?n.forEach(a=>{const l=s(e,a,{});Object.keys(l).length>0&&(v+=`<div class="item"><div class="lbl">${s(l,'公会名称',a)}</div><div class="val">${s(l,'公会类型','--')}</div></div>`)}):v='<div class="memo-empty">暂无已知公会</div>',i('guild-list',v)}(r),function(t){const c=s(d(t),'状态系统',{}),n=s(c,'状态概要',{}),v=s(c,'健康详情',{}),o=s(c,'心理详情',{});l('status-health',s(n,'健康','健康')),l('status-mental',s(n,'精神','正常')),l('status-emotion',s(n,'情绪','平静')),l('status-overall',s(n,'总体','正常')),l('health-sleep',`${a(s(v,'睡眠时长',8),8)}小时`),l('health-sleep-quality',s(v,'睡眠质量','良好'));const r=a(s(v,'精神疲劳度',0),0);e('health-fatigue-bar',r,100),l('health-fatigue',r);const p=a(s(v,'体力值',100),100);e('health-stamina-bar',p,100),l('health-stamina',p),l('health-sick',a(s(v,'是否生病',!1),!1)?'是':'否'),l('health-injured',a(s(v,'是否受伤',!1),!1)?'是':'否');const m=s(v,'疾病列表',[]);let u='';m.length>0&&(u='<div class="disease-list"><div class="lbl">疾病列表:</div><ul>',m.forEach(s=>{u+=`<li>${String(s)}</li>`}),u+='</ul></div>'),i('health-diseases',u);const h=s(v,'受伤部位','');let b='';h&&(b=`<div class="injury-info"><div class="lbl">受伤部位:</div><div class="val">${h}</div></div>`),i('health-injuries',b);const g=a(s(o,'当前压力值',20),20);e('mental-stress-bar',g,100),l('mental-stress',g);const y=a(s(o,'工作压力',0),0);e('mental-work-stress-bar',y,100),l('mental-work-stress',y);const f=a(s(o,'人际压力',0),0);e('mental-social-stress-bar',f,100),l('mental-social-stress',f);const k=a(s(o,'经济压力',0),0);e('mental-finance-stress-bar',k,100),l('mental-finance-stress',k),l('mental-mood',s(o,'长期心境','稳定'));const E=s(o,'应对方式',[]);l('mental-coping',E.length>0?E.join('、'):'无')}(r),function(e){const c=s(d(e),'财务系统.财务状况',{}),n=a(s(c,'现金',0),0),v=a(s(c,'银行账户',0),0),o=a(s(c,'月收入',0),0),r=a(s(c,'月支出',0),0);l('finance-cash',t(n)),l('finance-bank',t(v)),l('finance-income',t(o)),l('finance-expense',t(r));const p=s(c,'收入结构',{});let m='<div class="finance-structure">';const u=Object.keys(p);u.length>0?u.forEach(s=>{const l=a(p[s],0);l>0&&(m+=`<div class="finance-item"><span class="lbl">${s}:</span> <span class="val" style="color:var(--yellow)">${t(l)}元</span></div>`)}):m+='<div class="finance-empty">暂无收入记录</div>',m+='</div>',i('finance-income-structure',m);const h=s(c,'支出分类',{});let b='<div class="finance-structure">';const g=Object.keys(h);g.length>0?g.forEach(s=>{const l=a(h[s],0);l>0&&(b+=`<div class="finance-item"><span class="lbl">${s}:</span> <span class="val" style="color:var(--red)">${t(l)}元</span></div>`)}):b+='<div class="finance-empty">暂无支出记录</div>',b+='</div>',i('finance-expense-category',b);const y=s(c,'资产负债',{}),f=a(s(y,'存款',0),0),k=a(s(y,'投资',0),0),E=a(s(y,'负债',0),0),j=f+k-E;l('finance-deposit',t(f)),l('finance-investment',t(k)),l('finance-debt',t(E)),l('finance-net-worth',t(j));const x=a(s(c,'源能资源估值',0),0);l('finance-source-value',t(x)),l('finance-total-assets',t(f+k+x-E));const w=s(y,'贷款',{});let O='';const L=Object.keys(w);L.length>0&&(O='<div class="finance-loans"><div class="lbl">贷款列表:</div><ul>',L.forEach(l=>{const i=w[l];O+=`<li>${s(i,'名称',l)}: ${t(a(s(i,'金额',0),0))}元</li>`}),O+='</ul></div>'),i('finance-loans',O);const S=s(y,'信用卡',{});let I='';const A=Object.keys(S);A.length>0&&(I='<div class="finance-cards"><div class="lbl">信用卡列表:</div><ul>',A.forEach(l=>{const i=S[l];I+=`<li>${s(i,'名称',l)}: 已用${t(a(s(i,'已用额度',0),0))}元 / 总额度${t(a(s(i,'总额度',0),0))}元</li>`}),I+='</ul></div>'),i('finance-credit-cards',I)}(r),function(l){const e=s(d(l),'职业系统',{}),c=s(e,'主职业',{}),n=s(e,'副职业',{});let v='';if(c&&Object.keys(c).length>0&&s(c,'职业名称','')){v='<div class="career-detail">',v+=`<div class="career-item"><span class="lbl">职业名称:</span> <span class="val">${s(c,'职业名称','无')}</span></div>`,v+=`<div class="career-item"><span class="lbl">职业类型:</span> <span class="val">${s(c,'职业类型','无')}</span></div>`,v+=`<div class="career-item"><span class="lbl">工作单位:</span> <span class="val">${s(c,'工作单位','无')}</span></div>`;const l=s(c,'工作单位UID','');l&&(v+=`<div class="career-item"><span class="lbl">工作单位UID:</span> <span class="val">${l}</span></div>`),v+=`<div class="career-item"><span class="lbl">职位:</span> <span class="val">${s(c,'职位','无')}</span></div>`,v+=`<div class="career-item"><span class="lbl">入职时间:</span> <span class="val">${s(c,'入职时间','无')}</span></div>`,v+=`<div class="career-item"><span class="lbl">月收入:</span> <span class="val" style="color:var(--yellow)">${t(a(s(c,'月收入',0),0))}元</span></div>`,v+=`<div class="career-item"><span class="lbl">工作状态:</span> <span class="val">${s(c,'工作状态','在职')}</span></div>`,v+=`<div class="career-item"><span class="lbl">工作时间:</span> <span class="val">${s(c,'工作时间','无')}</span></div>`,v+=`<div class="career-item"><span class="lbl">工作性质:</span> <span class="val">${s(c,'工作性质','无')}</span></div>`;const i=a(s(c,'工作满意度',0),0),e=a(s(c,'工作压力',0),0);v+=`<div class="career-item"><span class="lbl">工作满意度:</span> <span class="val">${i}</span></div>`,v+=`<div class="career-item"><span class="lbl">工作压力:</span> <span class="val">${e}</span></div>`;const n=s(c,'职业描述','');n&&(v+=`<div class="career-item"><span class="lbl">职业描述:</span> <span class="val">${n}</span></div>`);const d=s(c,'工作内容',[]);d.length>0&&(v+=`<div class="career-item"><span class="lbl">工作内容:</span> <span class="val">${d.map(s=>`<span class="habit-item">${s}</span>`).join('')}</span></div>`);const o=s(c,'技能要求',[]);o.length>0&&(v+=`<div class="career-item"><span class="lbl">技能要求:</span> <span class="val">${o.map(s=>`<span class="habit-item">${s}</span>`).join('')}</span></div>`);const r=s(c,'工作技能',[]);r.length>0&&(v+=`<div class="career-item"><span class="lbl">工作技能:</span> <span class="val">${r.map(s=>`<span class="habit-item">${s}</span>`).join('')}</span></div>`);const p=s(c,'工作成就',[]);p.length>0&&(v+=`<div class="career-item"><span class="lbl">工作成就:</span> <span class="val">${p.map(s=>`<span class="habit-item">${s}</span>`).join('')}</span></div>`);const m=a(s(c,'是否自己开公司',!1),!1);v+=`<div class="career-item"><span class="lbl">是否自己开公司:</span> <span class="val">${m?'是':'否'}</span></div>`;const u=s(c,'公司信息',{});m&&Object.keys(u).length>0&&(v+='<div class="career-item"><span class="lbl">公司信息:</span> <span class="val">',Object.keys(u).forEach(a=>{v+=`${a}: ${s(u,a,'')} `}),v+='</span></div>'),v+='</div>'}else v='<div class="career-empty">暂无主职业</div>';i('career-main',v);let o='';if(n&&Object.keys(n).length>0&&s(n,'职业名称','')){o='<div class="career-detail">',o+=`<div class="career-item"><span class="lbl">职业名称:</span> <span class="val">${s(n,'职业名称','无')}</span></div>`,o+=`<div class="career-item"><span class="lbl">职业类型:</span> <span class="val">${s(n,'职业类型','无')}</span></div>`,o+=`<div class="career-item"><span class="lbl">工作单位:</span> <span class="val">${s(n,'工作单位','无')}</span></div>`,o+=`<div class="career-item"><span class="lbl">职位:</span> <span class="val">${s(n,'职位','无')}</span></div>`,o+=`<div class="career-item"><span class="lbl">入职时间:</span> <span class="val">${s(n,'入职时间','无')}</span></div>`,o+=`<div class="career-item"><span class="lbl">月收入:</span> <span class="val" style="color:var(--yellow)">${t(a(s(n,'月收入',0),0))}元</span></div>`,o+=`<div class="career-item"><span class="lbl">工作状态:</span> <span class="val">${s(n,'工作状态','在职')}</span></div>`,o+=`<div class="career-item"><span class="lbl">工作满意度:</span> <span class="val">${a(s(n,'工作满意度',0),0)}</span></div>`,o+=`<div class="career-item"><span class="lbl">工作压力:</span> <span class="val">${a(s(n,'工作压力',0),0)}</span></div>`;const l=s(n,'工作技能',[]);l.length>0&&(o+=`<div class="career-item"><span class="lbl">工作技能:</span> <span class="val">${l.map(s=>`<span class="habit-item">${s}</span>`).join('')}</span></div>`);const i=s(n,'工作成就',[]);i.length>0&&(o+=`<div class="career-item"><span class="lbl">工作成就:</span> <span class="val">${i.map(s=>`<span class="habit-item">${s}</span>`).join('')}</span></div>`),o+='</div>'}else o='<div class="career-empty">暂无副职业</div>';i('career-side',o)}(r),function(l){const e=s(d(l),'生活系统',{}),c=s(e,'住所',{});let n='';const o=Object.keys(c);o.length>0?o.forEach(i=>{const e=c[i];n+='<div class="residence-card">',n+=`<div class="residence-name">${s(e,'名称','未知住所')} <span style="color:var(--dim);font-size:12px;font-weight:normal">(${i})</span></div>`,n+='<details open><summary>📋 基本信息</summary><div class="details-content">',n+='<div class="grid g2">',n+=`<div class="item"><div class="lbl">类型</div><div class="val">${s(e,'类型','未知')}</div></div>`,n+=`<div class="item"><div class="lbl">状态</div><div class="val">${s(e,'状态','正常')}</div></div>`,n+='</div></div></details>';const d=s(e,'位置',{});if(Object.keys(d).length>0){n+='<details><summary>📍 位置信息</summary><div class="details-content">',n+='<div class="residence-info">',n+=`<div class="residence-item"><span class="lbl">详细地址:</span> <span class="val">${s(d,'详细地址','')}</span></div>`,n+=`<div class="residence-item"><span class="lbl">城市:</span> <span class="val">${s(d,'城市','')}</span></div>`,n+=`<div class="residence-item"><span class="lbl">区域:</span> <span class="val">${s(d,'区域','')}</span></div>`,n+=`<div class="residence-item"><span class="lbl">街道:</span> <span class="val">${s(d,'街道','')}</span></div>`,n+=`<div class="residence-item"><span class="lbl">交通便利度:</span> <span class="val">${s(d,'交通便利度','未知')}</span></div>`;const a=s(d,'周边设施',[]);a.length>0&&(n+=`<div class="residence-item"><span class="lbl">周边设施:</span> <span class="val">${a.map(s=>`<span class="habit-item">${s}</span>`).join('')}</span></div>`),n+='</div></div></details>'}n+='<details><summary>🏠 面积与房间</summary><div class="details-content">',n+='<div class="grid g3">',n+=`<div class="item"><div class="lbl">面积</div><div class="val">${a(s(e,'面积',0),0)}平米</div></div>`,n+=`<div class="item"><div class="lbl">房间数</div><div class="val">${a(s(e,'房间数',0),0)}间</div></div>`,n+=`<div class="item"><div class="lbl">卧室数</div><div class="val">${a(s(e,'卧室数',0),0)}间</div></div>`,n+=`<div class="item"><div class="lbl">卫生间数</div><div class="val">${a(s(e,'卫生间数',0),0)}间</div></div>`,n+=`<div class="item"><div class="lbl">客厅数</div><div class="val">${a(s(e,'客厅数',0),0)}间</div></div>`,n+=`<div class="item"><div class="lbl">楼层</div><div class="val">${a(s(e,'楼层',0),0)}/${a(s(e,'总楼层',0),0)}层</div></div>`,n+=`<div class="item"><div class="lbl">朝向</div><div class="val">${s(e,'朝向','未知')}</div></div>`,n+='</div></div></details>',n+='<details><summary>💰 财务信息</summary><div class="details-content">',n+='<div class="residence-info">';const o=a(s(e,'是否拥有',!1),!1);if(n+=`<div class="residence-item"><span class="lbl">产权类型:</span> <span class="val">${s(e,'产权类型','未知')}</span></div>`,n+=`<div class="residence-item"><span class="lbl">是否拥有:</span> <span class="val">${o?'是':'否'}</span></div>`,o)n+=`<div class="residence-item"><span class="lbl">购买价格:</span> <span class="val" style="color:var(--yellow)">${t(a(s(e,'购买价格',0),0))}元</span></div>`,n+=`<div class="residence-item"><span class="lbl">当前估值:</span> <span class="val" style="color:var(--green)">${t(a(s(e,'当前估值',0),0))}元</span></div>`;else{n+=`<div class="residence-item"><span class="lbl">月租金:</span> <span class="val" style="color:var(--red)">${t(a(s(e,'月租金',0),0))}元</span></div>`;const l=s(e,'租赁到期时间','');l&&(n+=`<div class="residence-item"><span class="lbl">租赁到期时间:</span> <span class="val">${l}</span></div>`)}n+=`<div class="residence-item"><span class="lbl">物业费:</span> <span class="val">${t(a(s(e,'物业费',0),0))}元/月</span></div>`,n+=`<div class="residence-item"><span class="lbl">水电费预估:</span> <span class="val">${t(a(s(e,'水电费预估',0),0))}元/月</span></div>`;const r=s(e,'其他费用',{});Object.keys(r).length>0&&(n+='<div class="residence-item"><span class="lbl">其他费用:</span> <span class="val">',Object.keys(r).forEach(s=>{n+=`${s}: ${t(a(r[s],0))}元 `}),n+='</span></div>'),n+='</div></div></details>',n+='<details><summary>🎨 装修与设施</summary><div class="details-content">',n+='<div class="residence-info">',n+=`<div class="residence-item"><span class="lbl">装修风格:</span> <span class="val">${s(e,'装修风格','未知')}</span></div>`,n+=`<div class="residence-item"><span class="lbl">装修程度:</span> <span class="val">${s(e,'装修程度','未知')}</span></div>`;const p=s(e,'家具清单',[]);p.length>0&&(n+=`<div class="residence-item"><span class="lbl">家具清单:</span> <span class="val">${p.map(s=>`<span class="habit-item">${s}</span>`).join('')}</span></div>`);const m=s(e,'家电清单',[]);m.length>0&&(n+=`<div class="residence-item"><span class="lbl">家电清单:</span> <span class="val">${m.map(s=>`<span class="habit-item">${s}</span>`).join('')}</span></div>`);const u=s(e,'特殊设施',[]);u.length>0&&(n+=`<div class="residence-item"><span class="lbl">特殊设施:</span> <span class="val">${u.map(s=>`<span class="habit-item">${s}</span>`).join('')}</span></div>`),n+='</div></div></details>',n+='<details><summary>🏘️ 社区信息</summary><div class="details-content">',n+='<div class="residence-info">',n+=`<div class="residence-item"><span class="lbl">社区名称:</span> <span class="val">${s(e,'社区名称','未知')}</span></div>`;const h=s(e,'社区环境描述','');h&&(n+=`<div class="residence-item"><span class="lbl">社区环境:</span> <span class="val">${h}</span></div>`),n+=`<div class="residence-item"><span class="lbl">物业评价:</span> <span class="val">${s(e,'物业评价','未知')}</span></div>`;const b=s(e,'居住人员UID列表',[]);b.length>0&&(n+=`<div class="residence-item"><span class="lbl">居住人员:</span> <span class="val">${b.map(s=>`<span class="habit-item">${v(l,s)} <span style="color:var(--dim);font-size:11px">(${s})</span></span>`).join('')}</span></div>`);const g=s(e,'邻居UID列表',[]);g.length>0&&(n+=`<div class="residence-item"><span class="lbl">邻居:</span> <span class="val">${g.map(s=>`<span class="habit-item">${v(l,s)} <span style="color:var(--dim);font-size:11px">(${s})</span></span>`).join('')}</span></div>`);const y=s(e,'入住时间','');y&&(n+=`<div class="residence-item"><span class="lbl">入住时间:</span> <span class="val">${y}</span></div>`),n+='</div></div></details>';const f=s(e,'最后维修时间',''),k=s(e,'重要事件',[]),E=s(e,'备注','');(f||k.length>0||E)&&(n+='<details><summary>📝 其他信息</summary><div class="details-content">',n+='<div class="residence-info">',f&&(n+=`<div class="residence-item"><span class="lbl">最后维修时间:</span> <span class="val">${f}</span></div>`),k.length>0&&(n+='<div class="residence-item"><span class="lbl">重要事件:</span> <span class="val">',k.forEach(s=>{n+=`<div class="memo-item" style="margin:4px 0">${String(s)}</div>`}),n+='</span></div>'),E&&(n+=`<div class="residence-item"><span class="lbl">备注:</span> <span class="val">${E}</span></div>`),n+='</div></div></details>'),n+='</div>'}):n='<div class="life-empty">暂无住所</div>',i('life-residence',n);const r=s(e,'车辆',{});let p='';const m=Object.keys(r);m.length>0?m.forEach(a=>{const l=r[a];p+='<div class="vehicle-card">',p+=`<div class="vehicle-name">${s(l,'名称','未知车辆')}</div>`,p+='<div class="vehicle-info">',p+=`<div class="vehicle-item"><span class="lbl">类型:</span> <span class="val">${s(l,'类型','未知')}</span></div>`,p+=`<div class="vehicle-item"><span class="lbl">品牌:</span> <span class="val">${s(l,'品牌','未知')}</span></div>`,p+=`<div class="vehicle-item"><span class="lbl">状态:</span> <span class="val">${s(l,'状态','正常')}</span></div>`,p+='</div></div>'}):p='<div class="life-empty">暂无车辆</div>',i('life-vehicles',p);const u=s(e,'宠物',{});let h='';const b=Object.keys(u);b.length>0?b.forEach(l=>{const i=u[l];h+='<div class="pet-card">';const e=s(i,'名字',s(i,'名称','未知宠物')),c=s(i,'物种',s(i,'种类','未知')),n=s(i,'品种',''),d=s(i,'性别','');h+=`<div class="pet-name">${e}`;const v=[];c&&v.push(c),n&&v.push(n),d&&v.push(d),v.length>0&&(h+=` <span style="color:var(--dim);font-size:12px;font-weight:normal">（${v.join(' / ')}）</span>`),h+='</div>',h+='<div class="pet-info">',h+=`<div class="pet-item"><span class="lbl">物种:</span> <span class="val">${c}</span></div>`,n&&(h+=`<div class="pet-item"><span class="lbl">品种:</span> <span class="val">${n}</span></div>`);const o=a(s(i,'年龄',0),0);o>0&&(h+=`<div class="pet-item"><span class="lbl">年龄:</span> <span class="val">${o}岁</span></div>`);const r=s(i,'体重','');r&&(h+=`<div class="pet-item"><span class="lbl">体重:</span> <span class="val">${r}</span></div>`);const p=s(i,'毛色','');p&&(h+=`<div class="pet-item"><span class="lbl">毛色:</span> <span class="val">${p}</span></div>`);const m=s(i,'性格','');m&&(h+=`<div class="pet-item"><span class="lbl">性格:</span> <span class="val">${m}</span></div>`);const b=s(i,'是否绝育',null);null!==b&&(h+=`<div class="pet-item"><span class="lbl">是否绝育:</span> <span class="val">${b?'是':'否'}</span></div>`),h+=`<div class="pet-item"><span class="lbl">健康状态:</span> <span class="val">${s(i,'健康状态','健康')}</span></div>`,h+=`<div class="pet-item"><span class="lbl">当前心情:</span> <span class="val">${s(i,'心情','未知')}</span></div>`;const g=s(i,'与主人关系',{});if(Object.keys(g).length>0){const l=a(s(g,'好感度',null),null),i=a(s(g,'亲密度',null),null),e=s(g,'关系阶段',''),t=s(g,'关系类型',''),c=s(g,'态度',''),n=s(g,'对方称呼我为',''),d=s(g,'我称呼对方为',''),v=s(g,'关系特殊标记',''),o=s(g,'重要记忆',[]);if(null!==l||null!==i||e||t||c||n||d||v||o&&o.length>0){h+='<div class="pet-item"><span class="lbl">与主人关系:</span><span class="val">';const s=[];null!==l&&s.push(`好感度 ${l}`),null!==i&&s.push(`亲密度 ${i}`),e&&s.push(`阶段：${e}`),t&&s.push(`类型：${t}`),c&&s.push(`态度：${c}`),d&&s.push(`你称呼宠物为「${d}」`),n&&s.push(`宠物视角中你被称为「${n}」`),v&&'无'!==v&&s.push(`特殊标记：${v}`),h+=s.join('； '),h+='</span></div>',o&&o.length>0&&(h+='<div class="pet-item"><span class="lbl">重要记忆:</span><span class="val">',o.forEach(s=>{h+=`<div class="memo-item" style="margin:2px 0">${String(s)}</div>`}),h+='</span></div>')}}const y=a(s(i,'购买价格',null),null),f=s(i,'购买时间',''),k=s(i,'购买渠道','');(null!==y||f||k)&&(null!==y&&(h+=`<div class="pet-item"><span class="lbl">购买价格:</span> <span class="val" style="color:var(--yellow)">${t(y)}元</span></div>`),f&&(h+=`<div class="pet-item"><span class="lbl">购买时间:</span> <span class="val">${f}</span></div>`),k&&(h+=`<div class="pet-item"><span class="lbl">购买渠道:</span> <span class="val">${k}</span></div>`));const E=s(i,'送达状态',''),j=s(i,'预计送达时间',''),x=s(i,'特殊用途','');(E||j||x)&&(E&&(h+=`<div class="pet-item"><span class="lbl">送达状态:</span> <span class="val">${E}</span></div>`),j&&(h+=`<div class="pet-item"><span class="lbl">预计送达时间:</span> <span class="val">${j}</span></div>`),x&&'待定'!==x&&(h+=`<div class="pet-item"><span class="lbl">特殊用途:</span> <span class="val">${x}</span></div>`));const w=s(i,'备注','');w&&(h+=`<div class="pet-item"><span class="lbl">备注:</span> <span class="val">${w}</span></div>`),h+='</div></div>'}):h='<div class="life-empty">暂无宠物</div>',i('life-pets',h)}(r),function(l){const e=s(d(l),'能力系统',{}),t=s(e,'天赋',{});let c='';const n=Object.keys(t);n.length>0?n.forEach(a=>{const l=t[a];c+='<div class="talent-card">',c+=`<div class="talent-name">${s(l,'名称','未知天赋')} <span class="talent-rarity">[${s(l,'稀有度','普通')}]</span></div>`,c+=`<div class="talent-desc">${s(l,'效果描述','无描述')}</div>`,c+='</div>'}):c='<div class="ability-empty">暂无天赋</div>',i('ability-talents',c);const v=s(e,'技能',{});let o='';const r=Object.keys(v);r.length>0?r.forEach(l=>{const i=v[l];o+='<div class="skill-card">',o+=`<div class="skill-name">${s(i,'技能名称','未知技能')} <span class="skill-type">[${s(i,'技能类型','生活技能')}]</span></div>`,o+='<div class="skill-info">',o+=`<div class="skill-item"><span class="lbl">熟练度:</span> <span class="val">${s(i,'熟练度','生疏')} (${a(s(i,'熟练度数值',0),0)}%)</span></div>`,o+=`<div class="skill-desc">${s(i,'技能描述','无描述')}</div>`,o+='</div></div>'}):o='<div class="ability-empty">暂无技能</div>',i('ability-skills',o);const p=s(e,'词缀',{}),m=s(p,'永久词缀',{}),u=s(p,'临时词缀',{});let h='';const b=Object.keys(m);b.length>0&&(h+='<div class="trait-section"><div class="trait-title">永久词缀:</div>',b.forEach(a=>{const l=m[a];h+='<div class="trait-card">',h+=`<div class="trait-name">${s(l,'名称','未知词缀')}</div>`,h+=`<div class="trait-desc">${s(l,'效果描述','无描述')}</div>`,h+='</div>'}),h+='</div>');const g=Object.keys(u);g.length>0&&(h+='<div class="trait-section"><div class="trait-title">临时词缀:</div>',g.forEach(a=>{const l=u[a];h+='<div class="trait-card">',h+=`<div class="trait-name">${s(l,'名称','未知词缀')}</div>`,h+=`<div class="trait-desc">${s(l,'效果描述','无描述')}</div>`,h+='</div>'}),h+='</div>'),h||(h='<div class="ability-empty">暂无词缀</div>'),i('ability-traits',h)}(r),function(a){const l=s(d(a),'社交系统',{}),e=s(l,'社交活动',{});let t='';const c=Object.keys(e);c.length>0?c.forEach(a=>{const l=e[a];t+='<div class="activity-card">',t+=`<div class="activity-name">${s(l,'活动名称','未知活动')}</div>`,t+='<div class="activity-info">',t+=`<div class="activity-item"><span class="lbl">类型:</span> <span class="val">${s(l,'活动类型','未知')}</span></div>`,t+=`<div class="activity-item"><span class="lbl">时间:</span> <span class="val">${s(l,'时间','未知')}</span></div>`,t+=`<div class="activity-item"><span class="lbl">地点:</span> <span class="val">${s(l,'地点','未知')}</span></div>`,t+=`<div class="activity-item"><span class="lbl">状态:</span> <span class="val">${s(l,'状态','计划中')}</span></div>`,t+='</div></div>'}):t='<div class="social-empty">暂无社交活动</div>',i('social-activities',t)}(r),function(a){const l=s(a,'公司系统.公司档案',{});let e='';const t=Object.keys(l);t.length>0?t.forEach(a=>{const i=l[a];e+='<div class="company-card">',e+=`<div class="company-name">${s(i,'公司名称','未知公司')}</div>`,e+='<div class="company-info">',e+=`<div class="company-item"><span class="lbl">公司类型:</span> <span class="val">${s(i,'公司类型','未知')}</span></div>`,e+=`<div class="company-item"><span class="lbl">行业:</span> <span class="val">${s(i,'行业','未知')}</span></div>`,e+=`<div class="company-item"><span class="lbl">规模:</span> <span class="val">${s(i,'规模','未知')}</span></div>`,e+=`<div class="company-item"><span class="lbl">地址:</span> <span class="val">${s(i,'地址','未知')}</span></div>`,e+='</div></div>'}):e='<div class="company-empty">暂无公司记录</div>',i('company-list',e)}(r),m(r),p(r),u(r)):console.warn('未读取到变量数据')}$(()=>{console.log('蚀界纪元状态栏加载中...'),function(){const s=document.querySelectorAll('.tab'),a=document.querySelectorAll('.pnl');s.forEach(l=>{l.addEventListener('click',()=>{const i=l.getAttribute('data-t');s.forEach(s=>s.classList.remove('active')),a.forEach(s=>s.classList.remove('active')),l.classList.add('active');const e=document.getElementById(`p-${i}`);e&&e.classList.add('active')})})}(),function(){const s=document.getElementById('theme-toggle'),a=document.getElementById('theme-panel'),l=document.querySelectorAll('.theme-preset'),i=document.getElementById('custom-apply');if(!s||!a)return;s.addEventListener('click',s=>{s.stopPropagation(),a.classList.toggle('show')}),document.addEventListener('click',l=>{a.contains(l.target)||l.target===s||a.classList.remove('show')}),l.forEach(s=>{s.addEventListener('click',()=>{l.forEach(s=>s.classList.remove('active')),s.classList.add('active');const a=s.getAttribute('data-t');a&&(document.documentElement.setAttribute('data-theme',a),localStorage.setItem('statusbar-theme',a))})}),i&&i.addEventListener('click',()=>{const s=document.getElementById('custom-color'),a=document.getElementById('custom-hex');if(s&&a){const l=s.value;a.value=l,document.documentElement.style.setProperty('--primary',l),localStorage.setItem('statusbar-custom-color',l)}});const e=localStorage.getItem('statusbar-theme');e&&(document.documentElement.setAttribute('data-theme',e),l.forEach(s=>{s.getAttribute('data-t')===e?s.classList.add('active'):s.classList.remove('active')}));const t=localStorage.getItem('statusbar-custom-color');if(t){document.documentElement.style.setProperty('--primary',t);const s=document.getElementById('custom-color'),a=document.getElementById('custom-hex');s&&(s.value=t),a&&(a.value=t)}const c=document.getElementById('font-size-slider'),n=document.getElementById('font-size-value'),d=document.getElementById('font-size-reset');if(c&&n){const s=localStorage.getItem('statusbar-font-scale'),a=s?parseFloat(s):1;c.value=String(a),n.textContent=`${Math.round(100*a)}%`,document.documentElement.style.setProperty('--font-scale',String(a)),c.addEventListener('input',()=>{const s=parseFloat(c.value);n.textContent=`${Math.round(100*s)}%`,document.documentElement.style.setProperty('--font-scale',String(s)),localStorage.setItem('statusbar-font-scale',String(s))})}d&&d.addEventListener('click',()=>{c&&n&&(c.value='1',n.textContent='100%',document.documentElement.style.setProperty('--font-scale','1'),localStorage.setItem('statusbar-font-scale','1'))})}(),h();const s=eventOn(tavern_events.MESSAGE_UPDATED,()=>{h()}),a=eventOn(tavern_events.MESSAGE_RECEIVED,()=>{h()});$(window).on('pagehide',()=>{s.stop(),a.stop()}),console.log('蚀界纪元状态栏加载完成')});
//# sourceMappingURL=index.js.map</script><style>:root{--bg:#0f1419;--bg2:#1a2329;--bg3:#252f38;--bg4:#2d3a47;--txt:#e0e8f0;--txt2:#a0b0c0;--dim:#6b7a8a;--primary:#4a90e2;--green:#4ade80;--red:#f87171;--blue:#60a5fa;--yellow:#fbbf24;--purple:#a78bfa;--cyan:#22d3ee;--orange:#fb923c;--border:#3d4a5a;--border-light:#4a5568;--glow-primary:rgba(74,144,226,0.3);--glow-green:rgba(74,222,128,0.3);--font-scale:1}[data-theme=blue]{--primary:#4a90e2;--glow-primary:rgba(74,144,226,0.3)}[data-theme=green]{--primary:#4ade80;--glow-primary:rgba(74,222,128,0.3)}[data-theme=purple]{--primary:#a78bfa;--glow-primary:rgba(167,139,250,0.3)}[data-theme=orange]{--primary:#fb923c;--glow-primary:rgba(251,146,60,0.3)}[data-theme=red]{--primary:#f87171;--glow-primary:rgba(248,113,113,0.3)}[data-theme=cyan]{--primary:#22d3ee;--glow-primary:rgba(34,211,238,0.3)}*{margin:0;padding:0;box-sizing:border-box;color:var(--txt)}.panel{font-family:"Microsoft YaHei","PingFang SC","Helvetica Neue",Arial,sans-serif;background:var(--bg);border:1px solid var(--border);border-radius:8px;overflow:hidden;max-width:100%;font-size:calc(15px*var(--font-scale))}.header{display:flex;justify-content:space-between;padding:10px 14px;background:var(--bg2);border-bottom:1px solid var(--border);flex-wrap:wrap;gap:10px;font-size:calc(15px*var(--font-scale))}.header-l,.header-r{display:flex;align-items:center;gap:14px;flex-wrap:wrap}.time{color:var(--primary)}.loc{color:var(--txt2)}.main-layout{display:flex;align-items:stretch;height:800px}.tabs{display:flex;flex-direction:column;background:var(--bg2);border-right:1px solid var(--border);padding:6px 0;min-width:120px;max-width:150px;overflow-y:auto;font-size:calc(14px*var(--font-scale))}.tab{padding:8px 12px;background:rgba(0,0,0,0);border:none;color:var(--dim);cursor:pointer;text-align:left;white-space:nowrap;transition:all .2s}.tab:hover{color:var(--txt2);background:var(--bg3)}.tab.active{color:var(--primary);background:var(--bg3);border-left:3px solid var(--primary)}.content{flex:1;padding:14px;min-width:0;overflow-y:auto}.pnl{display:none}.pnl.active{display:block}.sec{margin-bottom:16px}.sec-title{color:var(--primary);font-size:calc(15px*var(--font-scale));margin-bottom:10px;padding-bottom:6px;border-bottom:1px dashed var(--border);display:flex;align-items:center;gap:6px}.grid{display:grid;gap:10px}.g2{grid-template-columns:repeat(2,1fr)}.g3{grid-template-columns:repeat(3,1fr)}.g4{grid-template-columns:repeat(4,1fr)}.g5{grid-template-columns:repeat(5,1fr)}.g6{grid-template-columns:repeat(6,1fr)}.item{background:var(--bg2);padding:10px;border-radius:6px;border:1px solid var(--border);transition:all .2s}.item:hover{border-color:var(--primary);box-shadow:0 0 8px var(--glow-primary)}.lbl{color:var(--dim);font-size:calc(13px*var(--font-scale));margin-bottom:4px}.val{color:var(--txt);font-size:calc(15px*var(--font-scale));font-weight:500}.bar{height:8px;background:var(--bg);border-radius:4px;overflow:hidden;margin-top:6px}.bar-fill{height:100%;border-radius:4px;transition:width .5s ease}.bar-fatigue{background:linear-gradient(90deg,#f87171,#fb923c)}.bar-stamina{background:linear-gradient(90deg,#4ade80,#22c55e)}.bar-stress{background:linear-gradient(90deg,#f87171,#ef4444)}.bar-work-stress{background:linear-gradient(90deg,#fb923c,#f97316)}.bar-social-stress{background:linear-gradient(90deg,#a78bfa,#8b5cf6)}.bar-finance-stress{background:linear-gradient(90deg,#fbbf24,#f59e0b)}.bar-jing{background:linear-gradient(90deg,#ef4444,#dc2626)}.bar-qi{background:linear-gradient(90deg,#3b82f6,#2563eb)}.bar-shen{background:linear-gradient(90deg,#8b5cf6,#7c3aed)}.bar-source{background:linear-gradient(90deg,#a78bfa,#8b5cf6)}.bar-progress{background:linear-gradient(90deg,#22d3ee,#06b6d4)}.bar-threat{background:linear-gradient(90deg,#f87171,#ef4444)}.bar-risk{background:linear-gradient(90deg,#fb923c,#f97316)}.theme-btn{background:var(--bg3);border:1px solid var(--border);color:var(--txt);padding:6px 12px;border-radius:4px;cursor:pointer;font-size:calc(13px*var(--font-scale));transition:all .2s}.theme-btn:hover{border-color:var(--primary);background:var(--bg4)}.theme-panel{position:absolute;top:100%;right:0;margin-top:8px;background:var(--bg2);border:1px solid var(--border);border-radius:6px;padding:12px;min-width:200px;display:none;z-index:1000;box-shadow:0 4px 12px rgba(0,0,0,.3)}.theme-panel.show{display:block}.theme-section{margin-bottom:12px}.theme-section:last-child{margin-bottom:0}.theme-section-title{color:var(--dim);font-size:calc(12px*var(--font-scale));margin-bottom:8px}.theme-presets{display:flex;gap:8px;flex-wrap:wrap}.theme-preset{width:32px;height:32px;border-radius:4px;cursor:pointer;border:2px solid var(--border);transition:all .2s}.theme-preset:hover{border-color:var(--primary);transform:scale(1.1)}.theme-preset.active{border-color:var(--primary);box-shadow:0 0 8px var(--glow-primary)}.custom-color-row{display:flex;gap:8px;align-items:center}.custom-color-input{width:40px;height:32px;border:1px solid var(--border);border-radius:4px;cursor:pointer}.custom-color-hex{flex:1;background:var(--bg3);border:1px solid var(--border);color:var(--txt);padding:6px 8px;border-radius:4px;font-size:calc(12px*var(--font-scale))}.custom-apply-btn{background:var(--primary);border:none;color:#fff;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:calc(12px*var(--font-scale));transition:all .2s}.custom-apply-btn:hover{opacity:.9;transform:scale(1.05)}.font-size-row{display:flex;flex-direction:column;gap:8px}.font-size-slider{width:100%;height:6px;background:var(--bg3);border-radius:3px;outline:none;-webkit-appearance:none;appearance:none}.font-size-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;background:var(--primary);border-radius:50%;cursor:pointer;-webkit-transition:all .2s;transition:all .2s}.font-size-slider::-webkit-slider-thumb:hover{transform:scale(1.2);box-shadow:0 0 8px var(--glow-primary)}.font-size-slider::-moz-range-thumb{width:16px;height:16px;background:var(--primary);border-radius:50%;cursor:pointer;border:none;-moz-transition:all .2s;transition:all .2s}.font-size-slider::-moz-range-thumb:hover{transform:scale(1.2);box-shadow:0 0 8px var(--glow-primary)}.font-size-display{display:flex;justify-content:space-between;align-items:center;font-size:calc(13px*var(--font-scale));color:var(--txt2)}.font-size-reset{background:var(--bg3);color:var(--txt);border:1px solid var(--border);padding:4px 12px;border-radius:4px;cursor:pointer;font-size:calc(12px*var(--font-scale));transition:all .2s}.font-size-reset:hover{background:var(--bg4);border-color:var(--primary)}.appearance-detail{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border)}.appearance-item{display:flex;gap:10px;margin-bottom:8px;font-size:calc(14px*var(--font-scale))}.appearance-item .lbl{min-width:80px;color:var(--dim)}.appearance-item .val{color:var(--txt)}.career-detail{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border)}.career-item{display:flex;gap:10px;margin-bottom:8px;font-size:calc(14px*var(--font-scale))}.career-item .lbl{min-width:100px;color:var(--dim)}.career-item .val{color:var(--txt)}.career-empty{color:var(--dim);font-size:calc(14px*var(--font-scale));text-align:center;padding:20px}.residence-card{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border);margin-bottom:12px;transition:all .2s}.residence-card:hover{border-color:var(--primary);box-shadow:0 0 8px var(--glow-primary)}.residence-name{color:var(--primary);font-size:calc(16px*var(--font-scale));font-weight:bold;margin-bottom:10px}.residence-info{display:flex;flex-direction:column;gap:6px}.residence-item{display:flex;gap:10px;font-size:calc(14px*var(--font-scale))}.residence-item .lbl{min-width:80px;color:var(--dim)}.residence-item .val{color:var(--txt)}.vehicle-card{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border);margin-bottom:12px;transition:all .2s}.vehicle-card:hover{border-color:var(--primary);box-shadow:0 0 8px var(--glow-primary)}.vehicle-name{color:var(--primary);font-size:calc(16px*var(--font-scale));font-weight:bold;margin-bottom:10px}.vehicle-info{display:flex;flex-direction:column;gap:6px}.vehicle-item{display:flex;gap:10px;font-size:calc(14px*var(--font-scale))}.vehicle-item .lbl{min-width:80px;color:var(--dim)}.vehicle-item .val{color:var(--txt)}.platform-card{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border);margin-bottom:12px;transition:all .2s}.platform-card:hover{border-color:var(--primary);box-shadow:0 0 8px var(--glow-primary)}.platform-name{color:var(--primary);font-size:calc(16px*var(--font-scale));font-weight:bold;margin-bottom:10px}.platform-info{display:flex;flex-direction:column;gap:6px}.platform-item{display:flex;gap:10px;font-size:calc(14px*var(--font-scale))}.platform-item .lbl{min-width:80px;color:var(--dim)}.platform-item .val{color:var(--txt)}.platform-header{margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--border);-webkit-user-select:none;user-select:none}.platform-toggle{flex-shrink:0}.platform-toggle:hover{opacity:.7}.platform-info{overflow:hidden;transition:max-height .3s ease,opacity .3s ease,padding .3s ease;max-height:0;opacity:0;padding:0}.platform-info.expanded{max-height:10000px;opacity:1;padding-top:12px}.platform-info.collapsed{max-height:0;opacity:0;padding:0}.platform-id{margin-top:4px}.platform-section{margin-top:16px;padding-top:16px;border-top:1px solid var(--border)}.platform-section:first-of-type{margin-top:0;padding-top:0;border-top:none}.platform-section-title{font-size:calc(15px*var(--font-scale));font-weight:bold;color:var(--primary);margin-bottom:10px}.platform-empty{text-align:center;padding:40px 20px;color:var(--dim);font-size:calc(14px*var(--font-scale))}.tag-list{display:flex;flex-wrap:wrap;gap:6px;margin-top:8px}.tag{display:inline-block;padding:4px 10px;background:var(--bg3);border:1px solid var(--border);border-radius:12px;font-size:calc(12px*var(--font-scale));color:var(--txt)}.pet-card{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border);margin-bottom:12px;transition:all .2s}.pet-card:hover{border-color:var(--primary);box-shadow:0 0 8px var(--glow-primary)}.pet-name{color:var(--primary);font-size:calc(16px*var(--font-scale));font-weight:bold;margin-bottom:10px}.pet-info{display:flex;flex-direction:column;gap:6px}.pet-item{display:flex;gap:10px;font-size:calc(14px*var(--font-scale))}.pet-item .lbl{min-width:80px;color:var(--dim)}.pet-item .val{color:var(--txt)}.talent-card{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border);margin-bottom:10px;transition:all .2s}.talent-card:hover{border-color:var(--cyan);box-shadow:0 0 8px rgba(34,211,238,.3)}.talent-name{color:var(--txt);font-size:calc(15px*var(--font-scale));font-weight:bold;margin-bottom:6px}.talent-rarity{color:var(--cyan);font-size:calc(12px*var(--font-scale));padding:2px 6px;background:var(--bg);border-radius:3px;border:1px solid var(--cyan);margin-left:6px}.talent-desc{color:var(--txt2);font-size:calc(13px*var(--font-scale));line-height:1.5}.skill-card{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border);margin-bottom:10px;transition:all .2s}.skill-card:hover{border-color:var(--blue);box-shadow:0 0 8px rgba(96,165,250,.3)}.skill-name{color:var(--txt);font-size:calc(15px*var(--font-scale));font-weight:bold;margin-bottom:6px}.skill-type{color:var(--blue);font-size:calc(12px*var(--font-scale));padding:2px 6px;background:var(--bg);border-radius:3px;border:1px solid var(--blue);margin-left:6px}.skill-info{margin-top:6px}.skill-item{display:flex;gap:10px;font-size:calc(13px*var(--font-scale));margin-bottom:4px}.skill-item .lbl{min-width:80px;color:var(--dim)}.skill-item .val{color:var(--txt)}.skill-desc{color:var(--txt2);font-size:calc(13px*var(--font-scale));line-height:1.5;margin-top:8px;padding-top:8px;border-top:1px dashed var(--border)}.trait-section{margin-bottom:16px}.trait-title{color:var(--dim);font-size:calc(13px*var(--font-scale));margin-bottom:8px;padding-bottom:4px;border-bottom:1px dashed var(--border)}.trait-card{background:var(--bg2);padding:10px;border-radius:6px;border:1px solid var(--border);margin-bottom:8px;transition:all .2s}.trait-card:hover{border-color:var(--purple);box-shadow:0 0 8px rgba(167,139,250,.3)}.trait-name{color:var(--txt);font-size:calc(14px*var(--font-scale));font-weight:bold;margin-bottom:4px}.trait-desc{color:var(--txt2);font-size:calc(13px*var(--font-scale));line-height:1.5}.equipment-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.equipment-slot{background:var(--bg2);padding:10px;border-radius:6px;border:1px solid var(--border);transition:all .2s}.equipment-slot:hover{border-color:var(--primary)}.slot-name{color:var(--dim);font-size:calc(12px*var(--font-scale));margin-bottom:4px}.slot-value{color:var(--txt);font-size:calc(14px*var(--font-scale))}.item-card{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border);margin-bottom:12px;transition:all .2s}.item-card:hover{border-color:var(--primary);box-shadow:0 0 8px var(--glow-primary)}.item-header{margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--border);-webkit-user-select:none;user-select:none}.item-toggle{flex-shrink:0}.item-toggle:hover{opacity:.7}.item-name{color:var(--primary);font-size:calc(16px*var(--font-scale));font-weight:bold;margin-bottom:4px}.item-info{overflow:hidden;transition:max-height .3s ease,opacity .3s ease,padding .3s ease;max-height:0;opacity:0;padding:0}.item-info.expanded{max-height:10000px;opacity:1;padding-top:12px}.item-info.collapsed{max-height:0;opacity:0;padding:0}.item-section{margin-top:16px;padding-top:16px;border-top:1px solid var(--border)}.item-section:first-of-type{margin-top:0;padding-top:0;border-top:none}.item-section-title{font-size:calc(15px*var(--font-scale));font-weight:bold;color:var(--primary);margin-bottom:10px}.item-empty{text-align:center;padding:40px 20px;color:var(--dim);font-size:calc(14px*var(--font-scale))}.relation-card{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border);margin-bottom:12px;transition:all .2s}.relation-card:hover{border-color:var(--primary);box-shadow:0 0 8px var(--glow-primary)}.relation-name{color:var(--primary);font-size:calc(15px*var(--font-scale));font-weight:bold;margin-bottom:10px}.relation-info{display:flex;flex-direction:column;gap:6px}.relation-item{display:flex;gap:10px;font-size:calc(14px*var(--font-scale))}.relation-item .lbl{min-width:100px;color:var(--dim)}.relation-item .val{color:var(--txt)}.comm-card{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border);margin-bottom:10px;transition:all .2s}.comm-card:hover{border-color:var(--primary)}.comm-time{color:var(--dim);font-size:calc(12px*var(--font-scale));margin-bottom:6px}.comm-info{display:flex;flex-direction:column;gap:4px}.comm-item{display:flex;gap:10px;font-size:calc(13px*var(--font-scale))}.comm-item .lbl{min-width:60px;color:var(--dim)}.comm-item .val{color:var(--txt)}.activity-card{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border);margin-bottom:10px;transition:all .2s}.activity-card:hover{border-color:var(--primary)}.activity-name{color:var(--primary);font-size:calc(15px*var(--font-scale));font-weight:bold;margin-bottom:8px}.activity-info{display:flex;flex-direction:column;gap:4px}.activity-item{display:flex;gap:10px;font-size:calc(13px*var(--font-scale))}.activity-item .lbl{min-width:60px;color:var(--dim)}.activity-item .val{color:var(--txt)}.company-card{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border);margin-bottom:12px;transition:all .2s}.company-card:hover{border-color:var(--primary);box-shadow:0 0 8px var(--glow-primary)}.company-name{color:var(--primary);font-size:calc(16px*var(--font-scale));font-weight:bold;margin-bottom:10px}.company-info{display:flex;flex-direction:column;gap:6px}.company-item{display:flex;gap:10px;font-size:calc(14px*var(--font-scale))}.company-item .lbl{min-width:100px;color:var(--dim)}.company-item .val{color:var(--txt)}.memo-container{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border)}.memo-section{margin-bottom:16px}.memo-section:last-child{margin-bottom:0}.memo-title{color:var(--primary);font-size:calc(14px*var(--font-scale));margin-bottom:8px;padding-bottom:4px;border-bottom:1px dashed var(--border)}.memo-items{display:flex;flex-direction:column;gap:6px}.memo-item{background:var(--bg3);padding:8px 10px;border-radius:4px;border:1px solid var(--border);font-size:calc(13px*var(--font-scale));line-height:1.5;transition:all .2s}.memo-item:hover{border-color:var(--primary);background:var(--bg4)}.memo-empty{color:var(--dim);font-size:calc(13px*var(--font-scale));text-align:center;padding:20px}.schedule-group{margin-bottom:16px}.schedule-group:last-child{margin-bottom:0}.schedule-date{font-size:calc(14px*var(--font-scale));font-weight:bold;color:var(--primary);margin-bottom:6px}.schedule-list{display:flex;flex-direction:column;gap:8px}.schedule-card{background:var(--bg3);border-radius:6px;border:1px solid var(--border);padding:10px 10px 8px}.schedule-header{display:flex;align-items:center;justify-content:space-between;gap:8px;padding-bottom:6px;border-bottom:1px solid var(--border);cursor:pointer;-webkit-user-select:none;user-select:none}.schedule-main{flex:1;min-width:0}.schedule-title{font-size:calc(14px*var(--font-scale));color:var(--txt);font-weight:500;margin-bottom:4px}.schedule-meta{display:flex;flex-wrap:wrap;gap:8px;font-size:calc(12px*var(--font-scale));color:var(--dim)}.schedule-time::before{content:"⏰ "}.schedule-place::before{content:"📍 "}.schedule-tags{display:flex;flex-direction:column;gap:4px;align-items:flex-end}.schedule-tag{font-size:calc(11px*var(--font-scale));padding:2px 8px;border-radius:999px;border:1px solid var(--border);color:var(--txt2)}.status-待进行{border-color:var(--primary);color:var(--primary)}.status-进行中{border-color:var(--green);color:var(--green)}.status-已完成{border-color:var(--txt2);color:var(--txt2)}.priority-普通{border-color:var(--border)}.priority-重要{border-color:var(--yellow);color:var(--yellow)}.priority-紧急{border-color:var(--red);color:var(--red)}.schedule-toggle{background:rgba(0,0,0,0);border:none;color:var(--primary);font-size:calc(14px*var(--font-scale));cursor:pointer;padding:2px 4px}.schedule-info{overflow:hidden;transition:max-height .25s ease,opacity .25s ease,padding-top .25s ease;max-height:0;opacity:0;padding-top:0}.schedule-info.expanded{max-height:500px;opacity:1;padding-top:8px}.schedule-section{margin-bottom:8px}.schedule-section:last-child{margin-bottom:0}.schedule-section-title{font-size:calc(13px*var(--font-scale));color:var(--txt2);margin-bottom:4px}.schedule-note{font-size:calc(13px*var(--font-scale));color:var(--txt2);line-height:1.5}.finance-structure{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border)}.finance-item{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px dashed var(--border);font-size:calc(14px*var(--font-scale))}.finance-item:last-child{border-bottom:none}.finance-item .lbl{color:var(--dim)}.finance-item .val{font-weight:bold}.finance-empty{color:var(--dim);font-size:calc(13px*var(--font-scale));text-align:center;padding:20px}.finance-loans,.finance-cards{margin-top:12px;padding:12px;background:var(--bg2);border-radius:6px;border:1px solid var(--border)}.finance-loans ul,.finance-cards ul{list-style:none;margin-top:8px}.finance-loans li,.finance-cards li{padding:6px 0;border-bottom:1px dashed var(--border);font-size:calc(13px*var(--font-scale))}.finance-loans li:last-child,.finance-cards li:last-child{border-bottom:none}.disease-list,.injury-info{margin-top:12px;padding:12px;background:var(--bg2);border-radius:6px;border:1px solid var(--border)}.disease-list ul{list-style:none;margin-top:8px}.disease-list li{padding:6px 0;border-bottom:1px dashed var(--border);font-size:calc(13px*var(--font-scale));color:var(--red)}.disease-list li:last-child{border-bottom:none}.injury-info{color:var(--red)}.life-empty,.ability-empty,.social-empty,.company-empty{color:var(--dim);font-size:calc(14px*var(--font-scale));text-align:center;padding:30px;background:var(--bg2);border-radius:6px;border:1px dashed var(--border)}.personality-detail{background:var(--bg2);padding:12px;border-radius:6px;border:1px solid var(--border)}.personality-section{margin-bottom:16px}.personality-section:last-child{margin-bottom:0}.section-title{color:var(--primary);font-size:calc(14px*var(--font-scale));font-weight:bold;margin-bottom:8px;padding-bottom:4px;border-bottom:1px dashed var(--border)}.tag-group{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin-bottom:8px}.tag-label{color:var(--dim);font-size:calc(13px*var(--font-scale));min-width:50px}.tag{display:inline-block;padding:4px 10px;border-radius:12px;font-size:calc(12px*var(--font-scale));font-weight:500;transition:all .2s}.tag-positive{background:rgba(74,222,128,.2);color:var(--green);border:1px solid rgba(74,222,128,.3)}.tag-negative{background:rgba(248,113,113,.2);color:var(--red);border:1px solid rgba(248,113,113,.3)}.habit-list{display:flex;flex-wrap:wrap;gap:8px}.habit-item{display:inline-block;padding:6px 12px;background:var(--bg3);border:1px solid var(--border);border-radius:16px;font-size:calc(13px*var(--font-scale));color:var(--txt2);transition:all .2s}.habit-item:hover{border-color:var(--primary);background:var(--bg4);color:var(--txt)}.appearance-section{margin-top:12px;padding-top:12px;border-top:1px dashed var(--border)}.content::-webkit-scrollbar{width:8px}.content::-webkit-scrollbar-track{background:var(--bg)}.content::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px}.content::-webkit-scrollbar-thumb:hover{background:var(--border-light)}@media (max-width:768px){.grid.g4{grid-template-columns:repeat(2,1fr)}.grid.g6{grid-template-columns:repeat(3,1fr)}.equipment-grid{grid-template-columns:repeat(2,1fr)}}details{background:var(--bg2);border:1px solid var(--border);border-radius:6px;margin-bottom:12px;overflow:hidden;transition:all .2s}details[open]{box-shadow:0 4px 12px rgba(0,0,0,.2);border-color:var(--primary)}summary{padding:12px 14px;cursor:pointer;font-weight:bold;font-size:calc(15px*var(--font-scale));color:var(--primary);background:var(--bg2);-webkit-user-select:none;user-select:none;display:flex;align-items:center;transition:all .2s}summary:hover{background:var(--bg3)}summary::marker{color:var(--primary)}details .details-content{padding:14px;border-top:1px solid var(--border);background:var(--bg)}.character-selector{display:flex;gap:10px;margin-bottom:16px;overflow-x:auto;padding-bottom:8px}.char-btn{padding:8px 16px;background:var(--bg2);border:1px solid var(--border);border-radius:20px;color:var(--dim);cursor:pointer;white-space:nowrap;font-size:calc(14px*var(--font-scale));transition:all .2s}.char-btn:hover{border-color:var(--primary);color:var(--txt);background:var(--bg3)}.char-btn.active{background:var(--primary);color:#fff;border-color:var(--primary);box-shadow:0 0 8px var(--glow-primary)}.erotic-stats-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px;margin-bottom:16px}.erotic-stat{background:var(--bg2);padding:10px;border-radius:6px;border:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}.erotic-stat .lbl{margin-bottom:0;font-size:calc(13px*var(--font-scale))}.erotic-stat .val{font-weight:bold;color:var(--purple)}.erotic-section-title{color:var(--purple);font-size:calc(14px*var(--font-scale));font-weight:bold;margin:12px 0 8px;padding-bottom:4px;border-bottom:1px dashed var(--border)}.body-dev-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:8px}.dev-item{background:var(--bg2);padding:8px;border-radius:4px;text-align:center;border:1px solid var(--border)}.dev-item .lbl{font-size:calc(12px*var(--font-scale));margin-bottom:4px;display:block}.dev-item .val{font-size:calc(16px*var(--font-scale));color:var(--red);font-weight:bold}.exp-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:8px}.exp-item{background:var(--bg2);padding:8px;border-radius:4px;border:1px solid var(--border)}.exp-item .lbl{font-size:calc(12px*var(--font-scale));margin-bottom:2px;color:var(--dim)}.exp-item .val{font-size:calc(13px*var(--font-scale));color:var(--txt)}

/*# sourceMappingURL=main.css.map*/</style></head><body><div class="panel"><div class="header"><div class="header-l"><span class="time"><span id="h-date">----</span> | <span id="h-time">--:--</span></span> <span class="loc">📍 <span id="h-loc">未知</span></span> <span class="region">🌍 <span id="h-region">内环</span></span></div><div class="header-r"><span style="color:var(--green)">💰 现金: <span id="h-cash">0</span>元</span> <span style="color:var(--blue)">🏦 银行: <span id="h-bank">0</span>元</span> <span style="color:var(--purple)">⚡ 源能: <span id="h-source-energy">0</span>/<span id="h-source-energy-max">0</span></span> <span style="color:var(--yellow)">📊 月收入: <span id="h-income">0</span>元</span> <span style="color:var(--red)">💸 月支出: <span id="h-expense">0</span>元</span><div style="position:relative"><button class="theme-btn" id="theme-toggle">🎨 主题</button><div class="theme-panel" id="theme-panel"><div class="theme-section"><div class="theme-section-title">预设主题</div><div class="theme-presets"><div class="theme-preset active" data-t="blue" title="蓝色(默认)"></div><div class="theme-preset" data-t="green" title="绿色"></div><div class="theme-preset" data-t="purple" title="紫色"></div><div class="theme-preset" data-t="orange" title="橙色"></div><div class="theme-preset" data-t="red" title="红色"></div><div class="theme-preset" data-t="cyan" title="青色"></div></div></div><div class="theme-section"><div class="theme-section-title">自定义颜色</div><div class="custom-color-row"><input type="color" class="custom-color-input" id="custom-color" value="#4a90e2"> <input class="custom-color-hex" id="custom-hex" value="#4a90e2" maxlength="7"> <button class="custom-apply-btn" id="custom-apply">应用</button></div></div><div class="theme-section"><div class="theme-section-title">字号大小</div><div class="font-size-row"><input type="range" class="font-size-slider" id="font-size-slider" min="0.8" max="1.5" step="0.1" value="1"><div class="font-size-display"><span id="font-size-value">100%</span> <button class="font-size-reset" id="font-size-reset">重置</button></div></div></div></div></div></div></div><div class="main-layout"><div class="tabs"><button class="tab active" data-t="ov">📊 概览</button> <button class="tab" data-t="player">👤 玩家</button> <button class="tab" data-t="character">👥 角色</button> <button class="tab" data-t="awakened">⚡ 觉醒者</button> <button class="tab" data-t="source">💎 源能资源</button> <button class="tab" data-t="threat">⚠️ 威胁状态</button> <button class="tab" data-t="pioneer">🗺️ 拓荒者</button> <button class="tab" data-t="guild">🏛️ 公会</button> <button class="tab" data-t="status">💊 状态</button> <button class="tab" data-t="finance">💰 财务</button> <button class="tab" data-t="career">💼 职业</button> <button class="tab" data-t="life">🏠 生活</button> <button class="tab" data-t="ability">🎯 能力</button> <button class="tab" data-t="social">💬 社交</button> <button class="tab" data-t="items">📦 物品</button> <button class="tab" data-t="memo">📝 备忘录</button></div><div class="content"><div class="pnl active" id="p-ov"><div class="sec"><div class="sec-title">🌍 世界概况</div><div class="grid g2"><div class="item"><div class="lbl">当前时间</div><div class="val" id="ov-time">--</div></div><div class="item"><div class="lbl">当前位置</div><div class="val" id="ov-loc">--</div></div><div class="item"><div class="lbl">所在区域</div><div class="val" id="ov-region">内环</div></div><div class="item"><div class="lbl">玩家姓名</div><div class="val" id="ov-name">--</div></div></div></div><div class="sec"><div class="sec-title">⚡ 觉醒者状态</div><div class="grid g4"><div class="item"><div class="lbl">是否觉醒</div><div class="val" id="ov-awakened">未觉醒</div></div><div class="item"><div class="lbl">序列</div><div class="val" id="ov-sequence">--</div></div><div class="item"><div class="lbl">境界</div><div class="val" id="ov-realm">--</div></div><div class="item"><div class="lbl">等级</div><div class="val" id="ov-level">--</div></div></div><div class="grid g3" style="margin-top:10px"><div class="item"><div class="lbl">精窍</div><div class="bar"><div class="bar-fill bar-jing" id="ov-jing-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="ov-jing">0</span>/100</div></div><div class="item"><div class="lbl">气窍</div><div class="bar"><div class="bar-fill bar-qi" id="ov-qi-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="ov-qi">0</span>/100</div></div><div class="item"><div class="lbl">神窍</div><div class="bar"><div class="bar-fill bar-shen" id="ov-shen-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="ov-shen">0</span>/100</div></div></div></div><div class="sec"><div class="sec-title">⚠️ 威胁状态</div><div class="grid g4"><div class="item"><div class="lbl">空间震荡指数</div><div class="bar"><div class="bar-fill bar-threat" id="ov-space-shock-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="ov-space-shock">0</span>/100</div></div><div class="item"><div class="lbl">鬼气浓度</div><div class="bar"><div class="bar-fill bar-threat" id="ov-ghost-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="ov-ghost">0</span>/100</div></div><div class="item"><div class="lbl">预警级别</div><div class="val" id="ov-alert-level">无</div></div><div class="item"><div class="lbl">活跃威胁</div><div class="val" id="ov-active-threats">0</div></div></div></div><div class="sec"><div class="sec-title">💊 当前状态</div><div class="grid g4"><div class="item"><div class="lbl">健康</div><div class="val" id="ov-health">健康</div></div><div class="item"><div class="lbl">精神</div><div class="val" id="ov-mental">正常</div></div><div class="item"><div class="lbl">情绪</div><div class="val" id="ov-emotion">平静</div></div><div class="item"><div class="lbl">总体</div><div class="val" id="ov-overall">正常</div></div></div></div><div class="sec"><div class="sec-title">💰 财务状况</div><div class="grid g4"><div class="item"><div class="lbl">现金</div><div class="val" style="color:var(--green)"><span id="ov-cash">0</span>元</div></div><div class="item"><div class="lbl">银行账户</div><div class="val" style="color:var(--blue)"><span id="ov-bank">0</span>元</div></div><div class="item"><div class="lbl">月收入</div><div class="val" style="color:var(--yellow)"><span id="ov-income">0</span>元</div></div><div class="item"><div class="lbl">月支出</div><div class="val" style="color:var(--red)"><span id="ov-expense">0</span>元</div></div></div></div><div class="sec"><div class="sec-title">💎 源能资源</div><div class="grid g4"><div class="item"><div class="lbl">低纯度魔晶</div><div class="val" style="color:var(--cyan)"><span id="ov-crystal-low">0</span></div></div><div class="item"><div class="lbl">中纯度魔晶</div><div class="val" style="color:var(--blue)"><span id="ov-crystal-mid">0</span></div></div><div class="item"><div class="lbl">高纯度魔晶</div><div class="val" style="color:var(--purple)"><span id="ov-crystal-high">0</span></div></div><div class="item"><div class="lbl">魂珠</div><div class="val" style="color:var(--orange)"><span id="ov-soul-bead">0</span></div></div></div></div><div class="sec"><div class="sec-title">💼 职业信息</div><div class="grid g2"><div class="item"><div class="lbl">主职业</div><div class="val" id="ov-career">--</div></div><div class="item"><div class="lbl">工作单位</div><div class="val" id="ov-company">--</div></div></div></div><div class="sec"><div class="sec-title">🏠 住所信息</div><div class="grid g2"><div class="item"><div class="lbl">住所名称</div><div class="val" id="ov-residence">--</div></div><div class="item"><div class="lbl">住所类型</div><div class="val" id="ov-residence-type">--</div></div></div></div></div><div class="pnl" id="p-player"></div><div class="pnl" id="p-character"><div class="character-selector" id="character-selector"></div><div id="character-detail-container"></div></div><div class="pnl" id="p-awakened"><div class="sec"><div class="sec-title">⚡ 觉醒者档案</div><div class="grid g4"><div class="item"><div class="lbl">是否觉醒</div><div class="val" id="awakened-status">未觉醒</div></div><div class="item"><div class="lbl">觉醒方式</div><div class="val" id="awakened-method">--</div></div><div class="item"><div class="lbl">觉醒时间</div><div class="val" id="awakened-time">--</div></div><div class="item"><div class="lbl">序列</div><div class="val" id="awakened-sequence">--</div></div></div><div class="grid g4" style="margin-top:10px"><div class="item"><div class="lbl">流派</div><div class="val" id="awakened-style">--</div></div><div class="item"><div class="lbl">境界</div><div class="val" id="awakened-realm">--</div></div><div class="item"><div class="lbl">等级</div><div class="val" id="awakened-level">--</div></div><div class="item"><div class="lbl">序列倾向</div><div class="val" id="awakened-tendency">--</div></div></div></div><div class="sec"><div class="sec-title">🔋 三极窍</div><div class="grid g3"><div class="item"><div class="lbl">精窍（肉体承载力）</div><div class="bar"><div class="bar-fill bar-jing" id="awakened-jing-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="awakened-jing">0</span>/100</div></div><div class="item"><div class="lbl">气窍（能量转化率）</div><div class="bar"><div class="bar-fill bar-qi" id="awakened-qi-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="awakened-qi">0</span>/100</div></div><div class="item"><div class="lbl">神窍（精神干涉力）</div><div class="bar"><div class="bar-fill bar-shen" id="awakened-shen-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="awakened-shen">0</span>/100</div></div></div></div><div class="sec"><div class="sec-title">⚡ 源能数据</div><div class="grid g4"><div class="item"><div class="lbl">源能总量</div><div class="val" style="color:var(--purple)"><span id="awakened-source-total">0</span></div></div><div class="item"><div class="lbl">源能当前值</div><div class="bar"><div class="bar-fill bar-source" id="awakened-source-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="awakened-source-current">0</span>/<span id="awakened-source-max">0</span></div></div><div class="item"><div class="lbl">源能亲和力</div><div class="val" id="awakened-affinity">0</div></div><div class="item"><div class="lbl">当前境界进度</div><div class="bar"><div class="bar-fill bar-progress" id="awakened-progress-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="awakened-progress">0</span>%</div></div></div></div><div class="sec"><div class="sec-title">⚠️ 专属风险</div><div class="grid g4"><div class="item"><div class="lbl">走火（武道系）</div><div class="bar"><div class="bar-fill bar-risk" id="awakened-risk-qi-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="awakened-risk-qi">0</span>%</div></div><div class="item"><div class="lbl">识海崩溃（秘术系）</div><div class="bar"><div class="bar-fill bar-risk" id="awakened-risk-mind-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="awakened-risk-mind">0</span>%</div></div><div class="item"><div class="lbl">排异（科技系）</div><div class="bar"><div class="bar-fill bar-risk" id="awakened-risk-tech-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="awakened-risk-tech">0</span>%</div></div><div class="item"><div class="lbl">反噬（契约系）</div><div class="bar"><div class="bar-fill bar-risk" id="awakened-risk-contract-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="awakened-risk-contract">0</span>%</div></div></div></div><div class="sec"><div class="sec-title">📚 序列档案</div><div id="awakened-sequence-archives"></div></div><div class="sec"><div class="sec-title">🗺️ IPA认证</div><div class="grid g2"><div class="item"><div class="lbl">认证等级</div><div class="val" id="awakened-ipa-level">--</div></div><div class="item"><div class="lbl">认证时间</div><div class="val" id="awakened-ipa-time">--</div></div></div></div></div><div class="pnl" id="p-source"><div class="sec"><div class="sec-title">💎 魔晶</div><div class="grid g3"><div class="item"><div class="lbl">低纯度魔晶</div><div class="val" style="color:var(--cyan)"><span id="source-crystal-low">0</span></div></div><div class="item"><div class="lbl">中纯度魔晶</div><div class="val" style="color:var(--blue)"><span id="source-crystal-mid">0</span></div></div><div class="item"><div class="lbl">高纯度魔晶</div><div class="val" style="color:var(--purple)"><span id="source-crystal-high">0</span></div></div></div></div><div class="sec"><div class="sec-title">🔮 魂珠</div><div class="grid g2"><div class="item"><div class="lbl">魂珠数量</div><div class="val" style="color:var(--orange)"><span id="source-soul-bead">0</span></div></div><div class="item"><div class="lbl">资源估值</div><div class="val" style="color:var(--yellow)"><span id="source-value">0</span>元</div></div></div></div><div class="sec"><div class="sec-title">💀 兽核</div><div id="source-beast-core"></div></div><div class="sec"><div class="sec-title">🌿 天材地宝</div><div id="source-treasures"></div></div></div><div class="pnl" id="p-threat"><div class="sec"><div class="sec-title">⚠️ 威胁状态</div><div class="grid g4"><div class="item"><div class="lbl">空间震荡指数</div><div class="bar"><div class="bar-fill bar-threat" id="threat-space-shock-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="threat-space-shock">0</span>/100</div></div><div class="item"><div class="lbl">鬼气浓度</div><div class="bar"><div class="bar-fill bar-threat" id="threat-ghost-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="threat-ghost">0</span>/100</div></div><div class="item"><div class="lbl">当前预警级别</div><div class="val" id="threat-alert-level">无</div></div><div class="item"><div class="lbl">预警类型</div><div class="val" id="threat-alert-type">--</div></div></div><div class="grid g2" style="margin-top:10px"><div class="item"><div class="lbl">预警区域</div><div class="val" id="threat-alert-region">--</div></div><div class="item"><div class="lbl">活跃威胁数量</div><div class="val" id="threat-active-count">0</div></div></div></div><div class="sec"><div class="sec-title">🚪 活跃红门</div><div id="threat-red-gates"></div></div><div class="sec"><div class="sec-title">👻 活跃鬼域</div><div id="threat-grey-domains"></div></div></div><div class="pnl" id="p-pioneer"><div class="sec"><div class="sec-title">🗺️ IPA认证</div><div class="grid g3"><div class="item"><div class="lbl">认证等级</div><div class="val" id="pioneer-ipa-level">--</div></div><div class="item"><div class="lbl">认证时间</div><div class="val" id="pioneer-ipa-time">--</div></div><div class="item"><div class="lbl">认证状态</div><div class="val" id="pioneer-ipa-status">未认证</div></div></div></div><div class="sec"><div class="sec-title">📋 任务记录</div><div id="pioneer-missions"></div></div><div class="sec"><div class="sec-title">⭐ 声望系统</div><div id="pioneer-reputation"></div></div><div class="sec"><div class="sec-title">🗺️ 探索记录</div><div id="pioneer-exploration"></div></div></div><div class="pnl" id="p-guild"><div class="sec"><div class="sec-title">🏛️ 所属公会</div><div id="guild-member"></div></div><div class="sec"><div class="sec-title">📋 已知公会</div><div id="guild-list"></div></div></div><div class="pnl" id="p-status"><div class="sec"><div class="sec-title">💊 状态概要</div><div class="grid g4"><div class="item"><div class="lbl">健康</div><div class="val" id="status-health">健康</div></div><div class="item"><div class="lbl">精神</div><div class="val" id="status-mental">正常</div></div><div class="item"><div class="lbl">情绪</div><div class="val" id="status-emotion">平静</div></div><div class="item"><div class="lbl">总体</div><div class="val" id="status-overall">正常</div></div></div></div><div class="sec"><div class="sec-title">🏥 健康详情</div><div class="grid g3"><div class="item"><div class="lbl">睡眠时长</div><div class="val" id="health-sleep">8小时</div></div><div class="item"><div class="lbl">睡眠质量</div><div class="val" id="health-sleep-quality">良好</div></div><div class="item"><div class="lbl">精神疲劳度</div><div class="bar"><div class="bar-fill bar-fatigue" id="health-fatigue-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="health-fatigue">0</span>%</div></div></div><div class="grid g3"><div class="item"><div class="lbl">体力值</div><div class="bar"><div class="bar-fill bar-stamina" id="health-stamina-bar" style="width:100%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="health-stamina">100</span>%</div></div><div class="item"><div class="lbl">是否生病</div><div class="val" id="health-sick">否</div></div><div class="item"><div class="lbl">是否受伤</div><div class="val" id="health-injured">否</div></div></div><div id="health-diseases"></div><div id="health-injuries"></div></div><div class="sec"><div class="sec-title">🧠 心理详情</div><div class="grid g4"><div class="item"><div class="lbl">当前压力值</div><div class="bar"><div class="bar-fill bar-stress" id="mental-stress-bar" style="width:20%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="mental-stress">20</span>%</div></div><div class="item"><div class="lbl">工作压力</div><div class="bar"><div class="bar-fill bar-work-stress" id="mental-work-stress-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="mental-work-stress">0</span>%</div></div><div class="item"><div class="lbl">人际压力</div><div class="bar"><div class="bar-fill bar-social-stress" id="mental-social-stress-bar" style="width:0%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="mental-social-stress">0</span>%</div></div><div class="item"><div class="lbl">经济压力</div><div class="bar"><div class="bar-fill bar-finance-stress" id="mental-finance-stress-bar" style="width:20%"></div></div><div style="font-size:13px;color:var(--dim)"><span id="mental-finance-stress">20</span>%</div></div></div><div class="grid g2"><div class="item"><div class="lbl">长期心境</div><div class="val" id="mental-mood">稳定</div></div><div class="item"><div class="lbl">应对方式</div><div class="val" id="mental-coping">--</div></div></div></div></div><div class="pnl" id="p-finance"><div class="sec"><div class="sec-title">💰 财务状况</div><div class="grid g4"><div class="item"><div class="lbl">现金</div><div class="val" style="color:var(--green)"><span id="finance-cash">0</span>元</div></div><div class="item"><div class="lbl">银行账户</div><div class="val" style="color:var(--blue)"><span id="finance-bank">0</span>元</div></div><div class="item"><div class="lbl">月收入</div><div class="val" style="color:var(--yellow)"><span id="finance-income">0</span>元</div></div><div class="item"><div class="lbl">月支出</div><div class="val" style="color:var(--red)"><span id="finance-expense">0</span>元</div></div></div></div><div class="sec"><div class="sec-title">💎 源能资源估值</div><div class="grid g2"><div class="item"><div class="lbl">源能资源估值</div><div class="val" style="color:var(--purple)"><span id="finance-source-value">0</span>元</div></div><div class="item"><div class="lbl">总资产</div><div class="val" style="color:var(--yellow)"><span id="finance-total-assets">0</span>元</div></div></div></div><div class="sec"><div class="sec-title">📊 收入结构</div><div id="finance-income-structure"></div></div><div class="sec"><div class="sec-title">💸 支出分类</div><div id="finance-expense-category"></div></div><div class="sec"><div class="sec-title">📈 资产负债</div><div class="grid g4"><div class="item"><div class="lbl">存款</div><div class="val" style="color:var(--green)"><span id="finance-deposit">0</span>元</div></div><div class="item"><div class="lbl">投资</div><div class="val" style="color:var(--blue)"><span id="finance-investment">0</span>元</div></div><div class="item"><div class="lbl">负债</div><div class="val" style="color:var(--red)"><span id="finance-debt">0</span>元</div></div><div class="item"><div class="lbl">净资产</div><div class="val" style="color:var(--yellow)"><span id="finance-net-worth">0</span>元</div></div></div><div id="finance-loans"></div><div id="finance-credit-cards"></div></div></div><div class="pnl" id="p-career"><div class="sec"><div class="sec-title">💼 主职业</div><div id="career-main"></div></div><div class="sec"><div class="sec-title">💼 副职业</div><div id="career-side"></div></div></div><div class="pnl" id="p-life"><div class="sec"><div class="sec-title">🏠 住所</div><div id="life-residence"></div></div><div class="sec"><div class="sec-title">🚗 车辆</div><div id="life-vehicles"></div></div><div class="sec"><div class="sec-title">🐾 宠物</div><div id="life-pets"></div></div></div><div class="pnl" id="p-ability"><div class="sec"><div class="sec-title">⚡ 天赋</div><div id="ability-talents"></div></div><div class="sec"><div class="sec-title">🎯 技能</div><div id="ability-skills"></div></div><div class="sec"><div class="sec-title">🏷️ 词缀</div><div id="ability-traits"></div></div></div><div class="pnl" id="p-social"><div class="sec"><div class="sec-title">🎉 社交活动</div><div id="social-activities"></div></div></div><div class="pnl" id="p-items"><div id="items-list"></div></div><div class="pnl" id="p-memo"><div class="sec"><div class="sec-title">📝 备忘录</div><div class="memo-container"><div class="memo-section"><div class="memo-title">📌 重要事项</div><div id="memo-important-full"></div></div><div class="memo-section"><div class="memo-title">✅ 待处理事件</div><div id="memo-pending-full"></div></div><div class="memo-section"><div class="memo-title">📅 日程表</div><div id="memo-schedule-full"></div></div></div></div></div></div></div></div></body>
